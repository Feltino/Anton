!function(o,e){var t=o(".ve-menu-pc"),s=t.children("li").children("a"),n=t.find("ul").find("a"),i=t.find("ul").length,r=function(e){this.themeColor={blue:{fontColor:"#fff",bgColor:"#293547",hoverFontColor:"#fff",hoverBgColor:"#1260de"},dark:{fontColor:"#9D9D9D",bgColor:"#1F1F1F",hoverFontColor:"#fff",hoverBgColor:"#000"}},this.defaults={firstFontSize:"16px",firstFontColor:this.themeColor.blue.fontColor,firstBgColor:this.themeColor.blue.bgColor,firstHoverFontColor:this.themeColor.blue.hoverFontColor,firstHoverBgColor:this.themeColor.blue.hoverBgColor,secondFontSize:"16px",secondFontColor:this.themeColor.blue.fontColor,secondBgColor:this.themeColor.blue.bgColor,secondHoverFontColor:this.themeColor.blue.hoverFontColor,secondHoverBgColor:this.themeColor.blue.hoverBgColor,height:59,itemWidth:20,itemMargin:1,theme:"blue",menuIconColor:"#000",menuMaskColor:"#000",mFirstBgColor:"#000",mFirstFontColor:"#fff",mSecondBgColor:"#222",mSecondFontColor:"#fff",closeIconColor:"#fff",animate:!1,speed:200},this.settings=o.extend({},this.defaults,e),this.isMobile=!!navigator.userAgent.match(/AppleWebKit.*Mobile.*/)};r.prototype={setDefaultTheme:function(){function e(o,e){s.css({color:o,backgroundColor:e}),n.css({color:o,backgroundColor:e})}function i(e,s){var n;t.find("a").hover(function(){var t=o(this);t.css("color"),n=t.css("backgroundColor"),t.css({color:e,backgroundColor:s})},function(){o(this).css({color:void 0,backgroundColor:n})})}var r=this;switch(r.settings.theme){case"blue":e(r.themeColor.blue.fontColor,r.themeColor.blue.bgColor),!r.isMobile&&i(r.themeColor.blue.hoverFontColor,r.themeColor.blue.hoverBgColor);break;case"dark":e(r.themeColor.dark.fontColor,r.themeColor.dark.bgColor),!r.isMobile&&i(r.themeColor.dark.hoverFontColor,r.themeColor.dark.hoverBgColor)}return r},setFirstMenu:function(){var e=this;return s.css({height:e.settings.height,lineHeight:e.settings.height+"px",fontSize:e.settings.firstFontSize,color:e.settings.firstFontColor,backgroundColor:e.settings.firstBgColor}).parent("li").each(function(t,s){var n=o(this);n.width(n.width()+e.settings.itemWidth)}).not(t.children("li").first()).css({marginLeft:this.settings.itemMargin+"px"}),e},setSecondMenu:function(){var e=this;return i&&(n.css({height:e.settings.height,lineHeight:e.settings.height+"px",fontSize:e.settings.secondFontSize,color:e.settings.secondFontColor,backgroundColor:e.settings.secondBgColor}),o.each(s,function(t,n){var i=o(this).next("ul");i.css("top",e.settings.height),i.width()+e.settings.itemWidth<s.width()?i.width(s.width()):i.width(i.width()+e.settings.itemWidth)})),e},setHoverCss:function(){var e=this;s.hover(function(){o(this).css({color:e.settings.firstHoverFontColor,backgroundColor:e.settings.firstHoverBgColor})},function(){o(this).css({color:e.settings.firstFontColor,backgroundColor:e.settings.firstBgColor})}),n.hover(function(){var t=o(this);t.css({color:e.settings.secondHoverFontColor,backgroundColor:e.settings.secondHoverBgColor}),t.parents("ul").first().prev().css({color:e.settings.firstHoverFontColor,backgroundColor:e.settings.firstHoverBgColor})},function(){var t=o(this);t.css({color:e.settings.secondFontColor,backgroundColor:e.settings.secondBgColor}),t.parents("ul").first().prev().css({color:e.settings.firstFontColor,backgroundColor:e.settings.firstBgColor})})},responsiveLayout:function(){var s=this,n=o(e).width(),i=o(".ve-menu-icon"),r=s.settings.animate;return n<=768?i.length?(t.hide(),i.show()):(t.hide(),t.after('<div class="ve-menu-icon"><div></div><div></div><div></div></div>'),(i=o(".ve-menu-icon")).css("marginTop",10).on("click",function(){o(".ve-menu-mask").length||o(".ve-menu-mobile").length||o('<div class="ve-menu-mask"></div>').css("background",s.settings.menuMaskColor).appendTo(".ve-menu").after('<ul class="ve-menu-mobile"><li class="ve-menu-close"><div></div></li>'+t.html()+"</ul>").next().find("ul, li, a").removeAttr("style"),r?(s.animate(o(".ve-menu-mask"),r,s.settings.speed,"open"),s.animate(o(".ve-menu-mobile"),r,s.settings.speed,"open")):(o(".ve-menu-mask").show(),o(".ve-menu-mobile").show()),o(".ve-menu-mobile > li").not(".ve-menu-close").find("ul").find("a").css({background:s.settings.mSecondBgColor,color:s.settings.mSecondFontColor}),o(".ve-menu-mobile > li").not(".ve-menu-close").unbind("click").on("click",function(e){r?o(this).find("ul").toggle(150):o(this).find("ul").toggle()}),o(".ve-menu-close").css("color",s.settings.closeIconColor).children("div").on("click",function(){r?(s.animate(o(".ve-menu-mask"),r,s.settings.speed,"close"),s.animate(o(".ve-menu-mobile"),r,s.settings.speed,"close")):(o(".ve-menu-mask").hide(),o(".ve-menu-mobile").hide())})}).children("div").css("background",s.settings.menuIconColor)):i.length&&(t.show(),i.hide()),s},supportFastClick:function(){if(this.isMobile)try{FastClick&&FastClick.attach(document.body)}catch(o){console.log("fastclick.js is not found.You are still using normal 'click'")}else this.setHoverCss();return this},animate:function(o,e,t,s){var n={},i={};switch(e){case"fade":"open"==s?(o.hide(),o.fadeIn(t)):"close"==s&&o.fadeOut(t);break;case"slide":o.stop(!0,!0),"open"==s?(n.height=0,i.height="100%"):"close"==s&&(n.height="100%",i.height=0),o.css(n).animate(i,t)}}},o.fn.menu=function(e){var t=new r(e);return t.setDefaultTheme().setFirstMenu().setSecondMenu().responsiveLayout().supportFastClick(),o(window).resize(function(o){t.responsiveLayout()}),this}}(jQuery,window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lbnUuanMiXSwibmFtZXMiOlsiJCIsInciLCIkZmlyc3RNZW51IiwiJGZpcnN0TGlua3MiLCJjaGlsZHJlbiIsIiRzZW5jb25kTGlua3MiLCJmaW5kIiwiaGFzU2Vjb25kIiwibGVuZ3RoIiwiTWVudSIsIm9wdGlvbnMiLCJ0aGlzIiwidGhlbWVDb2xvciIsImJsdWUiLCJmb250Q29sb3IiLCJiZ0NvbG9yIiwiaG92ZXJGb250Q29sb3IiLCJob3ZlckJnQ29sb3IiLCJkYXJrIiwiZGVmYXVsdHMiLCJmaXJzdEZvbnRTaXplIiwiZmlyc3RGb250Q29sb3IiLCJmaXJzdEJnQ29sb3IiLCJmaXJzdEhvdmVyRm9udENvbG9yIiwiZmlyc3RIb3ZlckJnQ29sb3IiLCJzZWNvbmRGb250U2l6ZSIsInNlY29uZEZvbnRDb2xvciIsInNlY29uZEJnQ29sb3IiLCJzZWNvbmRIb3ZlckZvbnRDb2xvciIsInNlY29uZEhvdmVyQmdDb2xvciIsImhlaWdodCIsIml0ZW1XaWR0aCIsIml0ZW1NYXJnaW4iLCJ0aGVtZSIsIm1lbnVJY29uQ29sb3IiLCJtZW51TWFza0NvbG9yIiwibUZpcnN0QmdDb2xvciIsIm1GaXJzdEZvbnRDb2xvciIsIm1TZWNvbmRCZ0NvbG9yIiwibVNlY29uZEZvbnRDb2xvciIsImNsb3NlSWNvbkNvbG9yIiwiYW5pbWF0ZSIsInNwZWVkIiwic2V0dGluZ3MiLCJleHRlbmQiLCJpc01vYmlsZSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIm1hdGNoIiwicHJvdG90eXBlIiwic2V0RGVmYXVsdFRoZW1lIiwic2V0VGhlbWVDb2xvciIsImNzcyIsImNvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwic2V0SG92ZXJCZ0NvbG9yIiwibm9ybWFsQmdDb2xvciIsImhvdmVyIiwiJHRoaXMiLCJfdGhpcyIsInNldEZpcnN0TWVudSIsImxpbmVIZWlnaHQiLCJmb250U2l6ZSIsInBhcmVudCIsImVhY2giLCJpbmRleCIsImVsIiwid2lkdGgiLCJub3QiLCJmaXJzdCIsIm1hcmdpbkxlZnQiLCJzZXRTZWNvbmRNZW51IiwidmFsIiwiJHNlY29uZE1lbnUiLCJuZXh0Iiwic2V0SG92ZXJDc3MiLCJwYXJlbnRzIiwicHJldiIsInJlc3BvbnNpdmVMYXlvdXQiLCJzY3JlZW5XaWR0aCIsIiRtZW51SWNvbiIsImhpZGUiLCJzaG93IiwiYWZ0ZXIiLCJvbiIsImFwcGVuZFRvIiwiaHRtbCIsInJlbW92ZUF0dHIiLCJiYWNrZ3JvdW5kIiwidW5iaW5kIiwiZSIsInRvZ2dsZSIsInN1cHBvcnRGYXN0Q2xpY2siLCJGYXN0Q2xpY2siLCJhdHRhY2giLCJkb2N1bWVudCIsImJvZHkiLCJjb25zb2xlIiwibG9nIiwiJGVsZSIsInR5cGUiLCJvcGVuT3JDbG9zZSIsInN0YXJ0U3R5bGUiLCJlbmRTdHlsZSIsImZhZGVJbiIsImZhZGVPdXQiLCJzdG9wIiwiZm4iLCJtZW51Iiwid2luZG93IiwicmVzaXplIiwiZXZlbnQiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQUtBLFNBQVVBLEVBQUdDLEdBR1QsSUFBSUMsRUFBYUYsRUFBRSxlQUNmRyxFQUFjRCxFQUFXRSxTQUFTLE1BQU1BLFNBQVMsS0FDakRDLEVBQWdCSCxFQUFXSSxLQUFLLE1BQU1BLEtBQUssS0FDM0NDLEVBQVlMLEVBQVdJLEtBQUssTUFBTUUsT0FHbENDLEVBQU8sU0FBU0MsR0FFaEJDLEtBQUtDLFlBQ0RDLE1BQ0lDLFVBQVcsT0FDWEMsUUFBUyxVQUNUQyxlQUFnQixPQUNoQkMsYUFBYyxXQUVsQkMsTUFDSUosVUFBVyxVQUNYQyxRQUFTLFVBQ1RDLGVBQWdCLE9BQ2hCQyxhQUFjLFNBR3RCTixLQUFLUSxVQUNEQyxjQUFlLE9BQ2ZDLGVBQWdCVixLQUFLQyxXQUFXQyxLQUFLQyxVQUNyQ1EsYUFBY1gsS0FBS0MsV0FBV0MsS0FBS0UsUUFDbkNRLG9CQUFxQlosS0FBS0MsV0FBV0MsS0FBS0csZUFDMUNRLGtCQUFtQmIsS0FBS0MsV0FBV0MsS0FBS0ksYUFFeENRLGVBQWdCLE9BQ2hCQyxnQkFBaUJmLEtBQUtD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bUJpRixZQUlwQzdFLFNBQVMsT0FDVGdELElBQUksYUFBY08sRUFBTWhCLFNBQVNULGdCQU10QzhDLEVBQVV4RSxTQUNWTixFQUFXZ0YsT0FDWEYsRUFBVUMsUUFJWHRCLEdBRVhpQyxpQkFBa0IsV0FDZCxHQUFJakYsS0FBS2tDLFNBQ0wsSUFDUWdELFdBQ0FBLFVBQVVDLE9BQU9DLFNBQVNDLE1BRWhDLE1BQU9OLEdBQ0xPLFFBQVFDLElBQUkscUVBSWhCdkYsS0FBS2dFLGNBR1QsT0FBT2hFLE1BRVg4QixRQUFTLFNBQVMwRCxFQUFNQyxFQUFNMUQsRUFBTzJELEdBQ2pDLElBQUlDLEtBQ0FDLEtBRUosT0FBUUgsR0FDSixJQUFLLE9BQ2tCLFFBQWZDLEdBQ0FGLEVBQUtsQixPQUNMa0IsRUFBS0ssT0FBTzlELElBQ1UsU0FBZjJELEdBQ1BGLEVBQUtNLFFBQVEvRCxHQUtqQixNQUNKLElBQUssUUFDRHlELEVBQUtPLE1BQUFBLEdBQUssR0FDUyxRQUFmTCxHQUNBQyxFQUFXeEUsT0FBUyxFQUNwQnlFLEVBQVN6RSxPQUFTLFFBQ0ksU0FBZnVFLElBQ1BDLEVBQVd4RSxPQUFTLE9BQ3BCeUUsRUFBU3pFLE9BQVMsR0FFdEJxRSxFQUFLL0MsSUFBSWtELEdBQVk3RCxRQUFROEQsRUFBVTdELE1BT3ZEMUMsRUFBRTJHLEdBQUdDLEtBQU8sU0FBU2xHLEdBQ2pCLElBQUlrRyxFQUFPLElBQUluRyxFQUFLQyxHQVNwQixPQVJBa0csRUFBSzFELGtCQUNBVSxlQUNBVyxnQkFDQU8sbUJBQ0FjLG1CQUNMNUYsRUFBRTZHLFFBQVFDLE9BQU8sU0FBU0MsR0FDdEJILEVBQUs5QixxQkFFRm5FLE1BalVmLENBb1VHcUcsT0FBUUgiLCJmaWxlIjoibWVudS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciB6aGFuZ3NpbGVpIOWTjeW6lOW8j+WktOmDqOiPnOWNleWvvOiIqlxuICogQGRlc2NyaXB0aW9uIOS7o+eggeS8mOWMlu+8jFxuICovXG47XG4oZnVuY3Rpb24oJCwgdykge1xuXG4gICAgLy8g6aG16Z2i5YWD57SgXG4gICAgdmFyICRmaXJzdE1lbnUgPSAkKCcudmUtbWVudS1wYycpLFxuICAgICAgICAkZmlyc3RMaW5rcyA9ICRmaXJzdE1lbnUuY2hpbGRyZW4oJ2xpJykuY2hpbGRyZW4oJ2EnKSxcbiAgICAgICAgJHNlbmNvbmRMaW5rcyA9ICRmaXJzdE1lbnUuZmluZCgndWwnKS5maW5kKCdhJyksXG4gICAgICAgIGhhc1NlY29uZCA9ICRmaXJzdE1lbnUuZmluZCgndWwnKS5sZW5ndGg7XG5cbiAgICAvLyDoj5zljZXnsbvmnoTpgKDmlrnms5VcbiAgICB2YXIgTWVudSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgLy8g6Ieq5bim5Li76aKYOiBkYXJrKOm7keW6leeZveWtlynjgIFibHVlKOiTneW6leeZveWtlylcbiAgICAgICAgdGhpcy50aGVtZUNvbG9yID0ge1xuICAgICAgICAgICAgYmx1ZToge1xuICAgICAgICAgICAgICAgIGZvbnRDb2xvcjogJyNmZmYnLFxuICAgICAgICAgICAgICAgIGJnQ29sb3I6ICcjMjkzNTQ3JyxcbiAgICAgICAgICAgICAgICBob3ZlckZvbnRDb2xvcjogJyNmZmYnLFxuICAgICAgICAgICAgICAgIGhvdmVyQmdDb2xvcjogJyMxMjYwZGUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGFyazoge1xuICAgICAgICAgICAgICAgIGZvbnRDb2xvcjogJyM5RDlEOUQnLFxuICAgICAgICAgICAgICAgIGJnQ29sb3I6ICcjMUYxRjFGJyxcbiAgICAgICAgICAgICAgICBob3ZlckZvbnRDb2xvcjogJyNmZmYnLFxuICAgICAgICAgICAgICAgIGhvdmVyQmdDb2xvcjogJyMwMDAnXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICBmaXJzdEZvbnRTaXplOiAnMTZweCcsXG4gICAgICAgICAgICBmaXJzdEZvbnRDb2xvcjogdGhpcy50aGVtZUNvbG9yLmJsdWUuZm9udENvbG9yLFxuICAgICAgICAgICAgZmlyc3RCZ0NvbG9yOiB0aGlzLnRoZW1lQ29sb3IuYmx1ZS5iZ0NvbG9yLFxuICAgICAgICAgICAgZmlyc3RIb3ZlckZvbnRDb2xvcjogdGhpcy50aGVtZUNvbG9yLmJsdWUuaG92ZXJGb250Q29sb3IsXG4gICAgICAgICAgICBmaXJzdEhvdmVyQmdDb2xvcjogdGhpcy50aGVtZUNvbG9yLmJsdWUuaG92ZXJCZ0NvbG9yLFxuXG4gICAgICAgICAgICBzZWNvbmRGb250U2l6ZTogJzE2cHgnLFxuICAgICAgICAgICAgc2Vjb25kRm9udENvbG9yOiB0aGlzLnRoZW1lQ29sb3IuYmx1ZS5mb250Q29sb3IsXG4gICAgICAgICAgICBzZWNvbmRCZ0NvbG9yOiB0aGlzLnRoZW1lQ29sb3IuYmx1ZS5iZ0NvbG9yLFxuICAgICAgICAgICAgc2Vjb25kSG92ZXJGb250Q29sb3I6IHRoaXMudGhlbWVDb2xvci5ibHVlLmhvdmVyRm9udENvbG9yLFxuICAgICAgICAgICAgc2Vjb25kSG92ZXJCZ0NvbG9yOiB0aGlzLnRoZW1lQ29sb3IuYmx1ZS5ob3ZlckJnQ29sb3IsXG5cbiAgICAgICAgICAgIGhlaWdodDogNTksXG4gICAgICAgICAgICBpdGVtV2lkdGg6IDIwLFxuICAgICAgICAgICAgaXRlbU1hcmdpbjogMSxcbiAgICAgICAgICAgIHRoZW1lOiAnYmx1ZScsXG4gICAgICAgICAgICBtZW51SWNvbkNvbG9yOiAnIzAwMCcsXG4gICAgICAgICAgICBtZW51TWFza0NvbG9yOiAnIzAwMCcsXG4gICAgICAgICAgICBtRmlyc3RCZ0NvbG9yOiAnIzAwMCcsXG4gICAgICAgICAgICBtRmlyc3RGb250Q29sb3I6ICcjZmZmJyxcbiAgICAgICAgICAgIG1TZWNvbmRCZ0NvbG9yOiAnIzIyMicsXG4gICAgICAgICAgICBtU2Vjb25kRm9udENvbG9yOiAnI2ZmZicsXG4gICAgICAgICAgICBjbG9zZUljb25Db2xvcjogJyNmZmYnLFxuXG4gICAgICAgICAgICBhbmltYXRlOiBmYWxzZSxcbiAgICAgICAgICAgIHNwZWVkOiAyMDBcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCB0aGlzLmRlZmF1bHRzLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5pc01vYmlsZSA9ICEhbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQXBwbGVXZWJLaXQuKk1vYmlsZS4qLyk7O1xuICAgIH1cblxuICAgIC8vIOWOn+Wei+mTvuS4iuWKoOWxnuaAp+WSjOaWueazlVxuICAgIE1lbnUucHJvdG90eXBlID0ge1xuICAgICAgICBzZXREZWZhdWx0VGhlbWU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIC8vIOiuvue9rum7mOiupOS4u+mimFxuICAgICAgICAgICAgc3dpdGNoIChfdGhpcy5zZXR0aW5ncy50aGVtZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2JsdWUnOlxuICAgICAgICAgICAgICAgICAgICBzZXRUaGVtZUNvbG9yKF90aGlzLnRoZW1lQ29sb3IuYmx1ZS5mb250Q29sb3IsIF90aGlzLnRoZW1lQ29sb3IuYmx1ZS5iZ0NvbG9yKTtcbiAgICAgICAgICAgICAgICAgICAgIV90aGlzLmlzTW9iaWxlICYmIHNldEhvdmVyQmdDb2xvcihfdGhpcy50aGVtZUNvbG9yLmJsdWUuaG92ZXJGb250Q29sb3IsIF90aGlzLnRoZW1lQ29sb3IuYmx1ZS5ob3ZlckJnQ29sb3IpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXJrJzpcbiAgICAgICAgICAgICAgICAgICAgc2V0VGhlbWVDb2xvcihfdGhpcy50aGVtZUNvbG9yLmRhcmsuZm9udENvbG9yLCBfdGhpcy50aGVtZUNvbG9yLmRhcmsuYmdDb2xvcik7XG4gICAgICAgICAgICAgICAgICAgICFfdGhpcy5pc01vYmlsZSAmJiBzZXRIb3ZlckJnQ29sb3IoX3RoaXMudGhlbWVDb2xvci5kYXJrLmhvdmVyRm9udENvbG9yLCBfdGhpcy50aGVtZUNvbG9yLmRhcmsuaG92ZXJCZ0NvbG9yKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8g6K6+572u6buY6K6k5Li76aKY6aKc6ImyXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXRUaGVtZUNvbG9yKGZvbnRDb2xvciwgYmdDb2xvcikge1xuICAgICAgICAgICAgICAgICRmaXJzdExpbmtzLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBmb250Q29sb3IsXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYmdDb2xvclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICRzZW5jb25kTGlua3MuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IGZvbnRDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBiZ0NvbG9yXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyDorr7nva7pvKDmoIfmu5Hov4fog4zmma/popzoibJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldEhvdmVyQmdDb2xvcihmb250Q29sb3IsIGJnQ29sb3IpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9ybWFsRm9udENvbG9yLCBub3JtYWxCZ0NvbG9yO1xuICAgICAgICAgICAgICAgICRmaXJzdE1lbnUuZmluZCgnYScpLmhvdmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsRm9udENvbG9yID0gJHRoaXMuY3NzKCdjb2xvcicpO1xuICAgICAgICAgICAgICAgICAgICBub3JtYWxCZ0NvbG9yID0gJHRoaXMuY3NzKCdiYWNrZ3JvdW5kQ29sb3InKTtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBmb250Q29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJnQ29sb3JcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBub3JtYWxGb250Q29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IG5vcm1hbEJnQ29sb3JcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH0sXG4gICAgICAgIHNldEZpcnN0TWVudTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgJGZpcnN0TGlua3MuY3NzKHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IF90aGlzLnNldHRpbmdzLmhlaWdodCxcbiAgICAgICAgICAgICAgICBsaW5lSGVpZ2h0OiBfdGhpcy5zZXR0aW5ncy5oZWlnaHQgKyAncHgnLFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiBfdGhpcy5zZXR0aW5ncy5maXJzdEZvbnRTaXplLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBfdGhpcy5zZXR0aW5ncy5maXJzdEZvbnRDb2xvcixcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IF90aGlzLnNldHRpbmdzLmZpcnN0QmdDb2xvclxuICAgICAgICAgICAgfSkucGFyZW50KCdsaScpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAkdGhpcy53aWR0aCgkdGhpcy53aWR0aCgpICsgX3RoaXMuc2V0dGluZ3MuaXRlbVdpZHRoKTsgLy8g5LiA57qn6I+c5Y2V5a695bqmXG4gICAgICAgICAgICB9KS5ub3QoJGZpcnN0TWVudS5jaGlsZHJlbignbGknKS5maXJzdCgpKS5jc3Moe1xuICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IHRoaXMuc2V0dGluZ3MuaXRlbU1hcmdpbiArICdweCcgLy8g6I+c5Y2V6Ze06ZqZXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0U2Vjb25kTWVudTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGhhc1NlY29uZCkge1xuICAgICAgICAgICAgICAgICRzZW5jb25kTGlua3MuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBfdGhpcy5zZXR0aW5ncy5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQ6IF90aGlzLnNldHRpbmdzLmhlaWdodCArICdweCcsXG4gICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBfdGhpcy5zZXR0aW5ncy5zZWNvbmRGb250U2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IF90aGlzLnNldHRpbmdzLnNlY29uZEZvbnRDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBfdGhpcy5zZXR0aW5ncy5zZWNvbmRCZ0NvbG9yXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8g5LqM57qn6I+c5Y2V5a695bqmXG4gICAgICAgICAgICAgICAgJC5lYWNoKCRmaXJzdExpbmtzLCBmdW5jdGlvbihpbmRleCwgdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkc2Vjb25kTWVudSA9ICQodGhpcykubmV4dCgndWwnKTtcbiAgICAgICAgICAgICAgICAgICAgJHNlY29uZE1lbnUuY3NzKCd0b3AnLCBfdGhpcy5zZXR0aW5ncy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoJHNlY29uZE1lbnUud2lkdGgoKSArIF90aGlzLnNldHRpbmdzLml0ZW1XaWR0aCA8ICRmaXJzdExpbmtzLndpZHRoKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWNvbmRNZW51LndpZHRoKCRmaXJzdExpbmtzLndpZHRoKCkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNlY29uZE1lbnUud2lkdGgoJHNlY29uZE1lbnUud2lkdGgoKSArIF90aGlzLnNldHRpbmdzLml0ZW1XaWR0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0SG92ZXJDc3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIC8vIOS4gOe6p+iPnOWNleagt+W8j1xuICAgICAgICAgICAgJGZpcnN0TGlua3MuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogX3RoaXMuc2V0dGluZ3MuZmlyc3RIb3ZlckZvbnRDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBfdGhpcy5zZXR0aW5ncy5maXJzdEhvdmVyQmdDb2xvclxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBfdGhpcy5zZXR0aW5ncy5maXJzdEZvbnRDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBfdGhpcy5zZXR0aW5ncy5maXJzdEJnQ29sb3JcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyDkuoznuqfoj5zljZXmoLflvI9cbiAgICAgICAgICAgICRzZW5jb25kTGlua3MuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAkdGhpcy5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogX3RoaXMuc2V0dGluZ3Muc2Vjb25kSG92ZXJGb250Q29sb3IsXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogX3RoaXMuc2V0dGluZ3Muc2Vjb25kSG92ZXJCZ0NvbG9yXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJHRoaXMucGFyZW50cygndWwnKS5maXJzdCgpLnByZXYoKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogX3RoaXMuc2V0dGluZ3MuZmlyc3RIb3ZlckZvbnRDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBfdGhpcy5zZXR0aW5ncy5maXJzdEhvdmVyQmdDb2xvclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAkdGhpcy5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogX3RoaXMuc2V0dGluZ3Muc2Vjb25kRm9udENvbG9yLFxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IF90aGlzLnNldHRpbmdzLnNlY29uZEJnQ29sb3JcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkdGhpcy5wYXJlbnRzKCd1bCcpLmZpcnN0KCkucHJldigpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBfdGhpcy5zZXR0aW5ncy5maXJzdEZvbnRDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBfdGhpcy5zZXR0aW5ncy5maXJzdEJnQ29sb3JcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZXNwb25zaXZlTGF5b3V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXMsXG4gICAgICAgICAgICAgICAgc2NyZWVuV2lkdGggPSAkKHcpLndpZHRoKCksXG4gICAgICAgICAgICAgICAgJG1lbnVJY29uID0gJCgnLnZlLW1lbnUtaWNvbicpLFxuICAgICAgICAgICAgICAgIGFuaW1hdGUgPSBfdGhpcy5zZXR0aW5ncy5hbmltYXRlO1xuICAgICAgICAgICAgaWYgKHNjcmVlbldpZHRoIDw9IDc2OCkge1xuICAgICAgICAgICAgICAgIGlmICghJG1lbnVJY29uLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAvLyDpmpDol4/ljp/oj5zljZVcbiAgICAgICAgICAgICAgICAgICAgJGZpcnN0TWVudS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIOa3u+WKoOiPnOWNleaMiemSrlxuICAgICAgICAgICAgICAgICAgICAkZmlyc3RNZW51LmFmdGVyKCc8ZGl2IGNsYXNzPVwidmUtbWVudS1pY29uXCI+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+PC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgICAgICRtZW51SWNvbiA9ICQoJy52ZS1tZW51LWljb24nKTtcbiAgICAgICAgICAgICAgICAgICAgJG1lbnVJY29uLmNzcygnbWFyZ2luVG9wJywgMTApXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Yib5bu66YGu572p5ZKM5LiA44CB5LqM57qn6I+c5Y2VXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkKCcudmUtbWVudS1tYXNrJykubGVuZ3RoICYmICEkKCcudmUtbWVudS1tb2JpbGUnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnPGRpdiBjbGFzcz1cInZlLW1lbnUtbWFza1wiPjwvZGl2PicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCdiYWNrZ3JvdW5kJywgX3RoaXMuc2V0dGluZ3MubWVudU1hc2tDb2xvcikuYXBwZW5kVG8oJy52ZS1tZW51JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZnRlcignPHVsIGNsYXNzPVwidmUtbWVudS1tb2JpbGVcIj48bGkgY2xhc3M9XCJ2ZS1tZW51LWNsb3NlXCI+PGRpdj48L2Rpdj48L2xpPicgKyAkZmlyc3RNZW51Lmh0bWwoKSArICc8L3VsPicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmV4dCgpLmZpbmQoJ3VsLCBsaSwgYScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIOWwhuWKqOeUu+mAn+W6puiuvuS4uuaPkuS7tueahOWPguaVsFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWKqOeUu+aYvuekuuS4gOe6p+iPnOWNleWSjOmBrue9qeWxglxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbmltYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmFuaW1hdGUoJCgnLnZlLW1lbnUtbWFzaycpLCBhbmltYXRlLCBfdGhpcy5zZXR0aW5ncy5zcGVlZCwgJ29wZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYW5pbWF0ZSgkKCcudmUtbWVudS1tb2JpbGUnKSwgYW5pbWF0ZSwgX3RoaXMuc2V0dGluZ3Muc3BlZWQsICdvcGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnZlLW1lbnUtbWFzaycpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnZlLW1lbnUtbW9iaWxlJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS6jOe6p+iPnOWNleagt+W8j1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy52ZS1tZW51LW1vYmlsZSA+IGxpJykubm90KCcudmUtbWVudS1jbG9zZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCd1bCcpLmZpbmQoJ2EnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzKHsgLy8gIOS6jOe6p+iPnOWNleagt+W8j1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogX3RoaXMuc2V0dGluZ3MubVNlY29uZEJnQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogX3RoaXMuc2V0dGluZ3MubVNlY29uZEZvbnRDb2xvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS4gOe6p+iPnOWNleeCueWHu+S6i+S7tu+8jOavj+asoeaJk+W8gOS4gOe6p+iPnOWNleaXtumHjeaWsOe7keWumu+8jOmYsuatoumHjeWkjVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy52ZS1tZW51LW1vYmlsZSA+IGxpJykubm90KCcudmUtbWVudS1jbG9zZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC51bmJpbmQoJ2NsaWNrJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaaguaXtuS4jeaUr+aMgeiHquWumuS5ieWKqOeUu++8jOm7mOiupOS4unRvZ2dsZeWKqOaViFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyDmt7vliqDoh6rlrprkuYnliqjnlLtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS6jOe6p+iPnOWNleWKqOeUu1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFuaW1hdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ3VsJykudG9nZ2xlKDE1MCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgndWwnKS50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlhbPpl63mjInpkq7moLflvI/jgIHngrnlh7vkuovku7ZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcudmUtbWVudS1jbG9zZScpLmNzcygnY29sb3InLCBfdGhpcy5zZXR0aW5ncy5jbG9zZUljb25Db2xvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkcmVuKCdkaXYnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDliqjnlLvnu5PmnZ9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbmltYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYW5pbWF0ZSgkKCcudmUtbWVudS1tYXNrJyksIGFuaW1hdGUsIF90aGlzLnNldHRpbmdzLnNwZWVkLCAnY2xvc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hbmltYXRlKCQoJy52ZS1tZW51LW1vYmlsZScpLCBhbmltYXRlLCBfdGhpcy5zZXR0aW5ncy5zcGVlZCwgJ2Nsb3NlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy52ZS1tZW51LW1hc2snKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnZlLW1lbnUtbW9iaWxlJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGRyZW4oJ2RpdicpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCdiYWNrZ3JvdW5kJywgX3RoaXMuc2V0dGluZ3MubWVudUljb25Db2xvcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJGZpcnN0TWVudS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICRtZW51SWNvbi5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoJG1lbnVJY29uLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAkZmlyc3RNZW51LnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgJG1lbnVJY29uLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfSxcbiAgICAgICAgc3VwcG9ydEZhc3RDbGljazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc01vYmlsZSkgeyAvLyDlnKjnp7vliqjnq6/miZPlvIDpobXpnaLvvIzlsIbkuovku7bop6blj5HmlLnkuLpjbGlja1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChGYXN0Q2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEZhc3RDbGljay5hdHRhY2goZG9jdW1lbnQuYm9keSk7IC8vIOaUr+aMgWZhc3RjbGlja1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZmFzdGNsaWNrLmpzIGlzIG5vdCBmb3VuZC5Zb3UgYXJlIHN0aWxsIHVzaW5nIG5vcm1hbCBcXCdjbGlja1xcJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIOWcqFBD56uv5omT5byA6aG16Z2i77yM5LqL5Lu26Kem5Y+R5LuN5Li6aG92ZXJcbiAgICAgICAgICAgICAgICAvLyBpZiAoaGFzU2Vjb25kKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRIb3ZlckNzcygpO1xuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuICAgICAgICBhbmltYXRlOiBmdW5jdGlvbigkZWxlLCB0eXBlLCBzcGVlZCwgb3Blbk9yQ2xvc2UpIHtcbiAgICAgICAgICAgIHZhciBzdGFydFN0eWxlID0ge30sXG4gICAgICAgICAgICAgICAgZW5kU3R5bGUgPSB7fTtcblxuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmFkZSc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVuT3JDbG9zZSA9PSAnb3BlbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbGUuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGVsZS5mYWRlSW4oc3BlZWQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wZW5PckNsb3NlID09ICdjbG9zZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbGUuZmFkZU91dChzcGVlZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gJGVsZS5jc3MoJ29wYWNpdHknLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RhcnRTdHlsZS5vcGFjaXR5ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZW5kU3R5bGUub3BhY2l0eSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NsaWRlJzpcbiAgICAgICAgICAgICAgICAgICAgJGVsZS5zdG9wKHRydWUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3Blbk9yQ2xvc2UgPT0gJ29wZW4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFN0eWxlLmhlaWdodCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRTdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3Blbk9yQ2xvc2UgPT0gJ2Nsb3NlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRTdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRTdHlsZS5oZWlnaHQgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICRlbGUuY3NzKHN0YXJ0U3R5bGUpLmFuaW1hdGUoZW5kU3R5bGUsIHNwZWVkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDlsIbmj5Lku7bmjILliLBqUXVlcnnkuIvlubbliJ3lp4vljJZcbiAgICAkLmZuLm1lbnUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIHZhciBtZW51ID0gbmV3IE1lbnUob3B0aW9ucyk7XG4gICAgICAgIG1lbnUuc2V0RGVmYXVsdFRoZW1lKClcbiAgICAgICAgICAgIC5zZXRGaXJzdE1lbnUoKVxuICAgICAgICAgICAgLnNldFNlY29uZE1lbnUoKVxuICAgICAgICAgICAgLnJlc3BvbnNpdmVMYXlvdXQoKVxuICAgICAgICAgICAgLnN1cHBvcnRGYXN0Q2xpY2soKTtcbiAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgbWVudS5yZXNwb25zaXZlTGF5b3V0KClcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxufSkoalF1ZXJ5LCB3aW5kb3cpIl19
