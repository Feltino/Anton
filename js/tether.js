!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.Tether=e()}(this,function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){var e=t.getBoundingClientRect(),o={};for(var i in e)o[i]=e[i];if(t.ownerDocument!==document){var r=t.ownerDocument.defaultView.frameElement;if(r){var s=n(r);o.top+=s.top,o.bottom+=s.top,o.left+=s.left,o.right+=s.left}}return o}function r(t){var e=(getComputedStyle(t)||{}).position,o=[];if("fixed"===e)return[t];for(var i=t;(i=i.parentNode)&&i&&1===i.nodeType;){var n=void 0;try{n=getComputedStyle(i)}catch(t){}if(void 0===n||null===n)return o.push(i),o;var r=n,s=r.overflow,a=r.overflowX,l=r.overflowY;/(auto|scroll)/.test(s+l+a)&&("absolute"!==e||["relative","absolute","fixed"].indexOf(n.position)>=0)&&o.push(i)}return o.push(t.ownerDocument.body),t.ownerDocument!==document&&o.push(t.ownerDocument.defaultView),o}function s(){A&&document.body.removeChild(A),A=null}function a(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var o=e.documentElement,i=n(t),r=P();return i.top-=r.top,i.left-=r.left,void 0===i.width&&(i.width=document.body.scrollWidth-i.left-i.right),void 0===i.height&&(i.height=document.body.scrollHeight-i.top-i.bottom),i.top=i.top-o.clientTop,i.left=i.left-o.clientLeft,i.right=e.body.clientWidth-i.width-i.left,i.bottom=e.body.clientHeight-i.height-i.top,i}function l(t){return t.offsetParent||document.documentElement}function h(){if(M)return M;var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");f(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var o=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;o===i&&(i=e.clientWidth),document.body.removeChild(e);var n=o-i;return M={width:n,height:n}}function f(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var o in e)({}).hasOwnProperty.call(e,o)&&(t[o]=e[o])}),t}function d(t,e){if(void 0!==t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)});else{var o=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),i=c(t).replace(o," ");g(t,i)}}function p(t,e){if(void 0!==t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)});else{d(t,e);var o=c(t)+" "+e;g(t,o)}}function u(t,e){if(void 0!==t.classList)return t.classList.contains(e);var o=c(t);return new RegExp("(^| )"+e+"( |$)","gi").test(o)}function c(t){return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString?t.className.baseVal:t.className}function g(t,e){t.setAttribute("class",e)}function m(t,e,o){o.forEach(function(o){-1===e.indexOf(o)&&u(t,o)&&d(t,o)}),e.forEach(function(e){u(t,e)||p(t,e)})}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function b(t,e){var o=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t+o>=e&&e>=t-o}function y(){return"undefined"!=typeof performance&&void 0!==performance.now?performance.now():+new Date}function w(){for(var t={top:0,left:0},e=arguments.length,o=Array(e),i=0;i<e;i++)o[i]=arguments[i];return o.forEach(function(e){var o=e.top,i=e.left;"string"==typeof o&&(o=parseFloat(o,10)),"string"==typeof i&&(i=parseFloat(i,10)),t.top+=o,t.left+=i}),t}function C(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t}function O(t,e){return"scrollParent"===e?e=t.scrollParents[0]:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),void 0!==e.nodeType&&function(){var t=e,o=a(e),i=o,n=getComputedStyle(e);if(e=[i.left,i.top,o.width+i.left,o.height+i.top],t.ownerDocument!==document){var r=t.ownerDocument.defaultView;e[0]+=r.pageXOffset,e[1]+=r.pageYOffset,e[2]+=r.pageXOffset,e[3]+=r.pageYOffset}G.forEach(function(t,o){"Top"===(t=t[0].toUpperCase()+t.substr(1))||"Left"===t?e[o]+=parseFloat(n["border"+t+"Width"]):e[o]-=parseFloat(n["border"+t+"Width"])})}(),e}var E=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),x=void 0;void 0===x&&(x={modules:[]});var A=null,T=function(){var t=0;return function(){return++t}}(),S={},P=function(){var t=A;t&&document.body.contains(t)||((t=document.createElement("div")).setAttribute("data-tether-id",T()),f(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),A=t);var e=t.getAttribute("data-tether-id");return void 0===S[e]&&(S[e]=n(t),k(function(){delete S[e]})),S[e]},M=null,W=[],k=function(t){W.push(t)},_=function(){for(var t=void 0;t=W.pop();)t()},B=function(){function t(){i(this,t)}return E(t,[{key:"on",value:function(t,e,o){var i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];void 0===this.bindings&&(this.bindings={}),void 0===this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:o,once:i})}},{key:"once",value:function(t,e,o){this.on(t,e,o,!0)}},{key:"off",value:function(t,e){if(void 0!==this.bindings&&void 0!==this.bindings[t])if(void 0===e)delete this.bindings[t];else for(var o=0;o<this.bindings[t].length;)this.bindings[t][o].handler===e?this.bindings[t].splice(o,1):++o}},{key:"trigger",value:function(t){if(void 0!==this.bindings&&this.bindings[t]){for(var e=0,o=arguments.length,i=Array(o>1?o-1:0),n=1;n<o;n++)i[n-1]=arguments[n];for(;e<this.bindings[t].length;){var r=this.bindings[t][e],s=r.handler,a=r.ctx,l=r.once,h=a;void 0===h&&(h=this),s.apply(h,i),l?this.bindings[t].splice(e,1):++e}}}}]),t}();x.Utils={getActualBoundingClientRect:n,getScrollParents:r,getBounds:a,getOffsetParent:l,extend:f,addClass:p,removeClass:d,hasClass:u,updateClasses:m,defer:k,flush:_,uniqueId:T,Evented:B,getScrollBarSize:h,removeUtilElements:s};var z=function(){function t(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),j=function(t,e,o){for(var i=!0;i;){var n=t,r=e,s=o;i=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var h=Object.getPrototypeOf(n);if(null===h)return;t=h,e=r,o=s,i=!0,a=h=void 0}};if(void 0===x)throw new Error("You must include the utils.js file before tether.js");var Y=x.Utils,r=Y.getScrollParents,a=Y.getBounds,l=Y.getOffsetParent,f=Y.extend,p=Y.addClass,d=Y.removeClass,m=Y.updateClasses,k=Y.defer,_=Y.flush,h=Y.getScrollBarSize,s=Y.removeUtilElements,L=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],o=0;o<e.length;++o){var i=e[o];if(void 0!==t.style[i])return i}}(),D=[],X=function(){D.forEach(function(t){t.position(!1)}),_()};!function(){var t=null,e=null,o=null,i=function i(){if(void 0!==e&&e>16)return e=Math.min(e-16,250),void(o=setTimeout(i,250));void 0!==t&&y()-t<10||(null!=o&&(clearTimeout(o),o=null),t=y(),X(),e=y()-t)};"undefined"!=typeof window&&void 0!==window.addEventListener&&["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,i)})}();var F={center:"center",left:"right",right:"left"},H={middle:"middle",top:"bottom",bottom:"top"},N={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},U=function(t,e){var o=t.left,i=t.top;return"auto"===o&&(o=F[e.left]),"auto"===i&&(i=H[e.top]),{left:o,top:i}},V=function(t){var e=t.left,o=t.top;return void 0!==N[t.left]&&(e=N[t.left]),void 0!==N[t.top]&&(o=N[t.top]),{left:e,top:o}},R=function(t){var e=t.split(" "),o=z(e,2);return{top:o[0],left:o[1]}},q=R,I=function(t){function e(t){var o=this;i(this,e),j(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.position=this.position.bind(this),D.push(this),this.history=[],this.setOptions(t,!1),x.modules.forEach(function(t){void 0!==t.initialize&&t.initialize.call(o)}),this.position()}return v(e,B),E(e,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return void 0!==e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,o=arguments.length<=1||void 0===arguments[1]||arguments[1],i={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=f(i,t);var n=this.options,s=n.element,a=n.target,l=n.targetModifier;if(this.element=s,this.target=a,this.targetModifier=l,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if(void 0===e[t])throw new Error("Tether Error: Both element and target must be defined");void 0!==e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),p(this.element,this.getClass("element")),!1!==this.options.addTargetClasses&&p(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=q(this.options.targetAttachment),this.attachment=q(this.options.attachment),this.offset=R(this.options.offset),this.targetOffset=R(this.options.targetOffset),void 0!==this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=r(this.target),!1!==this.options.enabled&&this.enable(o)}},{key:"getTargetBounds",value:function(){if(void 0===this.targetModifier)return a(this.target);if("visible"===this.targetModifier)return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:((r={height:(t=a(this.target)).height,width:t.width,top:t.top,left:t.left}).height=Math.min(r.height,t.height-(pageYOffset-t.top)),r.height=Math.min(r.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),r.height=Math.min(innerHeight,r.height),r.height-=2,r.width=Math.min(r.width,t.width-(pageXOffset-t.left)),r.width=Math.min(r.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),r.width=Math.min(innerWidth,r.width),r.width-=2,r.top<pageYOffset&&(r.top=pageYOffset),r.left<pageXOffset&&(r.left=pageXOffset),r);if("scroll-handle"===this.targetModifier){var t=void 0,e=this.target;e===document.body?(e=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=a(e);var o=getComputedStyle(e),i=0;(e.scrollWidth>e.clientWidth||[o.overflow,o.overflowX].indexOf("scroll")>=0||this.target!==document.body)&&(i=15);var n=t.height-parseFloat(o.borderTopWidth)-parseFloat(o.borderBottomWidth)-i,r={width:15,height:.975*n*(n/e.scrollHeight),left:t.left+t.width-parseFloat(o.borderLeftWidth)-15},s=0;n<408&&this.target===document.body&&(s=-11e-5*Math.pow(n,2)-.00727*n+22.58),this.target!==document.body&&(r.height=Math.max(r.height,24));var l=this.target.scrollTop/(e.scrollHeight-n);return r.top=l*(n-r.height-s)+t.top+parseFloat(o.borderTopWidth),this.target===document.body&&(r.height=Math.max(r.height,24)),r}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return void 0===this._cache&&(this._cache={}),void 0===this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];!1!==this.options.addTargetClasses&&p(this.target,this.getClass("enabled")),p(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(e){e!==t.target.ownerDocument&&e.addEventListener("scroll",t.position)}),e&&this.position()}},{key:"disable",value:function(){var t=this;d(this.target,this.getClass("enabled")),d(this.element,this.getClass("enabled")),this.enabled=!1,void 0!==this.scrollParents&&this.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.position)})}},{key:"destroy",value:function(){var t=this;this.disable(),D.forEach(function(e,o){e===t&&D.splice(o,1)}),0===D.length&&s()}},{key:"updateAttachClasses",value:function(t,e){var o=this;t=t||this.attachment,e=e||this.targetAttachment;var i=["left","top","bottom","right","middle","center"];void 0!==this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),void 0===this._addAttachClasses&&(this._addAttachClasses=[]);var n=this._addAttachClasses;t.top&&n.push(this.getClass("element-attached")+"-"+t.top),t.left&&n.push(this.getClass("element-attached")+"-"+t.left),e.top&&n.push(this.getClass("target-attached")+"-"+e.top),e.left&&n.push(this.getClass("target-attached")+"-"+e.left);var r=[];i.forEach(function(t){r.push(o.getClass("element-attached")+"-"+t),r.push(o.getClass("target-attached")+"-"+t)}),k(function(){void 0!==o._addAttachClasses&&(m(o.element,o._addAttachClasses,r),!1!==o.options.addTargetClasses&&m(o.target,o._addAttachClasses,r),delete o._addAttachClasses)})}},{key:"position",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var o=U(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,o);var i=this.cache("element-bounds",function(){return a(t.element)}),n=i.width,r=i.height;if(0===n&&0===r&&void 0!==this.lastSize){var s=this.lastSize;n=s.width,r=s.height}else this.lastSize={width:n,height:r};var f=this.cache("target-bounds",function(){return t.getTargetBounds()}),d=f,p=C(V(this.attachment),{width:n,height:r}),u=C(V(o),d),c=C(this.offset,{width:n,height:r}),g=C(this.targetOffset,d);p=w(p,c),u=w(u,g);for(var m=f.left+u.left-p.left,v=f.top+u.top-p.top,b=0;b<x.modules.length;++b){var y=x.modules[b].position.call(this,{left:m,top:v,targetAttachment:o,targetPos:f,elementPos:i,offset:p,targetOffset:u,manualOffset:c,manualTargetOffset:g,scrollbarSize:T,attachment:this.attachment});if(!1===y)return!1;void 0!==y&&"object"==typeof y&&(v=y.top,m=y.left)}var O={page:{top:v,left:m},viewport:{top:v-pageYOffset,bottom:pageYOffset-v-r+innerHeight,left:m-pageXOffset,right:pageXOffset-m-n+innerWidth}},E=this.target.ownerDocument,A=E.defaultView,T=void 0;return A.innerHeight>E.documentElement.clientHeight&&(T=this.cache("scrollbar-size",h),O.viewport.bottom-=T.height),A.innerWidth>E.documentElement.clientWidth&&(T=this.cache("scrollbar-size",h),O.viewport.right-=T.width),-1!==["","static"].indexOf(E.body.style.position)&&-1!==["","static"].indexOf(E.body.parentElement.style.position)||(O.page.bottom=E.body.scrollHeight-v-r,O.page.right=E.body.scrollWidth-m-n),void 0!==this.options.optimizations&&!1!==this.options.optimizations.moveElement&&void 0===this.targetModifier&&function(){var e=t.cache("target-offsetparent",function(){return l(t.target)}),o=t.cache("target-offsetparent-bounds",function(){return a(e)}),i=getComputedStyle(e),n=o,r={};if(["Top","Left","Bottom","Right"].forEach(function(t){r[t.toLowerCase()]=parseFloat(i["border"+t+"Width"])}),o.right=E.body.scrollWidth-o.left-n.width+r.right,o.bottom=E.body.scrollHeight-o.top-n.height+r.bottom,O.page.top>=o.top+r.top&&O.page.bottom>=o.bottom&&O.page.left>=o.left+r.left&&O.page.right>=o.right){var s=e.scrollTop,h=e.scrollLeft;O.offset={top:O.page.top-o.top+s-r.top,left:O.page.left-o.left+h-r.left}}}(),this.move(O),this.history.unshift(O),this.history.length>3&&this.history.pop(),e&&_(),!0}}},{key:"move",value:function(t){var e=this;if(void 0!==this.element.parentNode){var o={};for(var i in t){o[i]={};for(var n in t[i]){for(var r=!1,s=0;s<this.history.length;++s){var a=this.history[s];if(void 0!==a[i]&&!b(a[i][n],t[i][n])){r=!0;break}}r||(o[i][n]=!0)}}var h={top:"",left:"",right:"",bottom:""},d=function(t,o){if(!1!==(void 0!==e.options.optimizations?e.options.optimizations.gpu:null)){var i=void 0,n=void 0;t.top?(h.top=0,i=o.top):(h.bottom=0,i=-o.bottom),t.left?(h.left=0,n=o.left):(h.right=0,n=-o.right),window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 1.3dppx)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3)").matches||(n=Math.round(n),i=Math.round(i))),h[L]="translateX("+n+"px) translateY("+i+"px)","msTransform"!==L&&(h[L]+=" translateZ(0)")}else t.top?h.top=o.top+"px":h.bottom=o.bottom+"px",t.left?h.left=o.left+"px":h.right=o.right+"px"},p=!1;if((o.page.top||o.page.bottom)&&(o.page.left||o.page.right)?(h.position="absolute",d(o.page,t.page)):(o.viewport.top||o.viewport.bottom)&&(o.viewport.left||o.viewport.right)?(h.position="fixed",d(o.viewport,t.viewport)):void 0!==o.offset&&o.offset.top&&o.offset.left?function(){h.position="absolute";var i=e.cache("target-offsetparent",function(){return l(e.target)});l(e.element)!==i&&k(function(){e.element.parentNode.removeChild(e.element),i.appendChild(e.element)}),d(o.offset,t.offset),p=!0}():(h.position="absolute",d({top:!0,left:!0},t.page)),!p)if(this.options.bodyElement)this.options.bodyElement.appendChild(this.element);else{for(var u=!0,c=this.element.parentNode;c&&1===c.nodeType&&"BODY"!==c.tagName;){if("static"!==getComputedStyle(c).position){u=!1;break}c=c.parentNode}u||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var g={},m=!1;for(var n in h){var v=h[n];this.element.style[n]!==v&&(m=!0,g[n]=v)}m&&k(function(){f(e.element.style,g),e.trigger("repositioned")})}}}]),e}();I.modules=[],x.position=X;var $=f(I,x),z=function(){function t(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=(Y=x.Utils).getBounds,f=Y.extend,m=Y.updateClasses,k=Y.defer,G=["left","top","right","bottom"];x.modules.push({position:function(t){var e=this,o=t.top,i=t.left,n=t.targetAttachment;if(!this.options.constraints)return!0;var r=this.cache("element-bounds",function(){return a(e.element)}),s=r.height,l=r.width;if(0===l&&0===s&&void 0!==this.lastSize){var h=this.lastSize;l=h.width,s=h.height}var d=this.cache("target-bounds",function(){return e.getTargetBounds()}),p=d.height,u=d.width,c=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,o=t.pinnedClass;e&&c.push(e),o&&c.push(o)}),c.forEach(function(t){["left","top","right","bottom"].forEach(function(e){c.push(t+"-"+e)})});var g=[],v=f({},n),b=f({},this.attachment);return this.options.constraints.forEach(function(t){var r=t.to,a=t.attachment,h=t.pin;void 0===a&&(a="");var f=void 0,d=void 0;if(a.indexOf(" ")>=0){var c=a.split(" "),m=z(c,2);d=m[0],f=m[1]}else f=d=a;var y=O(e,r);"target"!==d&&"both"!==d||(o<y[1]&&"top"===v.top&&(o+=p,v.top="bottom"),o+s>y[3]&&"bottom"===v.top&&(o-=p,v.top="top")),"together"===d&&("top"===v.top&&("bottom"===b.top&&o<y[1]?(o+=p,v.top="bottom",o+=s,b.top="top"):"top"===b.top&&o+s>y[3]&&o-(s-p)>=y[1]&&(o-=s-p,v.top="bottom",b.top="bottom")),"bottom"===v.top&&("top"===b.top&&o+s>y[3]?(o-=p,v.top="top",o-=s,b.top="bottom"):"bottom"===b.top&&o<y[1]&&o+(2*s-p)<=y[3]&&(o+=s-p,v.top="top",b.top="top")),"middle"===v.top&&(o+s>y[3]&&"top"===b.top?(o-=s,b.top="bottom"):o<y[1]&&"bottom"===b.top&&(o+=s,b.top="top"))),"target"!==f&&"both"!==f||(i<y[0]&&"left"===v.left&&(i+=u,v.left="right"),i+l>y[2]&&"right"===v.left&&(i-=u,v.left="left")),"together"===f&&(i<y[0]&&"left"===v.left?"right"===b.left?(i+=u,v.left="right",i+=l,b.left="left"):"left"===b.left&&(i+=u,v.left="right",i-=l,b.left="right"):i+l>y[2]&&"right"===v.left?"left"===b.left?(i-=u,v.left="left",i-=l,b.left="right"):"right"===b.left&&(i-=u,v.left="left",i+=l,b.left="left"):"center"===v.left&&(i+l>y[2]&&"left"===b.left?(i-=l,b.left="right"):i<y[0]&&"right"===b.left&&(i+=l,b.left="left"))),"element"!==d&&"both"!==d||(o<y[1]&&"bottom"===b.top&&(o+=s,b.top="top"),o+s>y[3]&&"top"===b.top&&(o-=s,b.top="bottom")),"element"!==f&&"both"!==f||(i<y[0]&&("right"===b.left?(i+=l,b.left="left"):"center"===b.left&&(i+=l/2,b.left="left")),i+l>y[2]&&("left"===b.left?(i-=l,b.left="right"):"center"===b.left&&(i-=l/2,b.left="right"))),"string"==typeof h?h=h.split(",").map(function(t){return t.trim()}):!0===h&&(h=["top","left","right","bottom"]),h=h||[];var w=[],C=[];o<y[1]&&(h.indexOf("top")>=0?(o=y[1],w.push("top")):C.push("top")),o+s>y[3]&&(h.indexOf("bottom")>=0?(o=y[3]-s,w.push("bottom")):C.push("bottom")),i<y[0]&&(h.indexOf("left")>=0?(i=y[0],w.push("left")):C.push("left")),i+l>y[2]&&(h.indexOf("right")>=0?(i=y[2]-l,w.push("right")):C.push("right")),w.length&&function(){var t=void 0;t=void 0!==e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned"),g.push(t),w.forEach(function(e){g.push(t+"-"+e)})}(),C.length&&function(){var t=void 0;t=void 0!==e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds"),g.push(t),C.forEach(function(e){g.push(t+"-"+e)})}(),(w.indexOf("left")>=0||w.indexOf("right")>=0)&&(b.left=v.left=!1),(w.indexOf("top")>=0||w.indexOf("bottom")>=0)&&(b.top=v.top=!1),v.top===n.top&&v.left===n.left&&b.top===e.attachment.top&&b.left===e.attachment.left||(e.updateAttachClasses(b,v),e.trigger("update",{attachment:b,targetAttachment:v}))}),k(function(){!1!==e.options.addTargetClasses&&m(e.target,g,c),m(e.element,g,c)}),{top:o,left:i}}});var a=(Y=x.Utils).getBounds,m=Y.updateClasses,k=Y.defer;return x.modules.push({position:function(t){var e=this,o=t.top,i=t.left,n=this.cache("element-bounds",function(){return a(e.element)}),r=n.height,s=n.width,l=this.getTargetBounds(),h=o+r,f=i+s,d=[];o<=l.bottom&&h>=l.top&&["left","right"].forEach(function(t){var e=l[t];e!==i&&e!==f||d.push(t)}),i<=l.right&&f>=l.left&&["top","bottom"].forEach(function(t){var e=l[t];e!==o&&e!==h||d.push(t)});var p=[],u=[],c=["left","top","right","bottom"];return p.push(this.getClass("abutted")),c.forEach(function(t){p.push(e.getClass("abutted")+"-"+t)}),d.length&&u.push(this.getClass("abutted")),d.forEach(function(t){u.push(e.getClass("abutted")+"-"+t)}),k(function(){!1!==e.options.addTargetClasses&&m(e.target,u,p),m(e.element,u,p)}),!0}}),z=function(){function t(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x.modules.push({position:function(t){var e=t.top,o=t.left;if(this.options.shift){var i=this.options.shift;"function"==typeof this.options.shift&&(i=this.options.shift.call(this,{top:e,left:o}));var n=void 0,r=void 0;if("string"==typeof i){(i=i.split(" "))[1]=i[1]||i[0];var s=z(i,2);n=s[0],r=s[1],n=parseFloat(n,10),r=parseFloat(r,10)}else n=i.top,r=i.left;return e+=n,o+=r,{top:e,left:o}}}}),$});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRldGhlci5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiVGV0aGVyIiwidGhpcyIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3QiLCJub2RlIiwiYm91bmRpbmdSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicmVjdCIsImsiLCJvd25lckRvY3VtZW50IiwiZG9jdW1lbnQiLCJfZnJhbWVFbGVtZW50IiwiZGVmYXVsdFZpZXciLCJmcmFtZUVsZW1lbnQiLCJmcmFtZVJlY3QiLCJ0b3AiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJnZXRTY3JvbGxQYXJlbnRzIiwiZWwiLCJwb3NpdGlvbiIsImdldENvbXB1dGVkU3R5bGUiLCJwYXJlbnRzIiwicGFyZW50IiwicGFyZW50Tm9kZSIsIm5vZGVUeXBlIiwic3R5bGUiLCJlcnIiLCJwdXNoIiwiX3N0eWxlIiwib3ZlcmZsb3ciLCJvdmVyZmxvd1giLCJvdmVyZmxvd1kiLCJ0ZXN0IiwiaW5kZXhPZiIsImJvZHkiLCJyZW1vdmVVdGlsRWxlbWVudHMiLCJ6ZXJvRWxlbWVudCIsInJlbW92ZUNoaWxkIiwiZ2V0Qm91bmRzIiwiZG9jIiwiZG9jdW1lbnRFbGVtZW50IiwiZG9jRWwiLCJib3giLCJvcmlnaW4iLCJnZXRPcmlnaW4iLCJ3aWR0aCIsInNjcm9sbFdpZHRoIiwiaGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwiY2xpZW50VG9wIiwiY2xpZW50TGVmdCIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwiZ2V0T2Zmc2V0UGFyZW50Iiwib2Zmc2V0UGFyZW50IiwiZ2V0U2Nyb2xsQmFyU2l6ZSIsIl9zY3JvbGxCYXJTaXplIiwiaW5uZXIiLCJjcmVhdGVFbGVtZW50Iiwib3V0ZXIiLCJleHRlbmQiLCJwb2ludGVyRXZlbnRzIiwidmlzaWJpbGl0eSIsImFwcGVuZENoaWxkIiwid2lkdGhDb250YWluZWQiLCJvZmZzZXRXaWR0aCIsIndpZHRoU2Nyb2xsIiwib3V0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiYXJncyIsIkFycmF5IiwicHJvdG90eXBlIiwiYXBwbHkiLCJzbGljZSIsImZvckVhY2giLCJvYmoiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJyZW1vdmVDbGFzcyIsIm5hbWUiLCJjbGFzc0xpc3QiLCJzcGxpdCIsImNscyIsInRyaW0iLCJyZW1vdmUiLCJyZWdleCIsIlJlZ0V4cCIsImpvaW4iLCJjbGFzc05hbWUiLCJnZXRDbGFzc05hbWUiLCJyZXBsYWNlIiwic2V0Q2xhc3NOYW1lIiwiYWRkQ2xhc3MiLCJhZGQiLCJoYXNDbGFzcyIsImNvbnRhaW5zIiwiU1ZHQW5pbWF0ZWRTdHJpbmciLCJiYXNlVmFsIiwic2V0QXR0cmlidXRlIiwidXBkYXRlQ2xhc3NlcyIsImFsbCIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsIk9iamVjdCIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwidmFsdWUiLCJlbnVtZXJhYmxlIiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIndpdGhpbiIsImEiLCJiIiwiZGlmZiIsIm5vdyIsInBlcmZvcm1hbmNlIiwiRGF0ZSIsImFkZE9mZnNldCIsIl9sZW4iLCJvZmZzZXRzIiwiX2tleSIsIl9yZWYiLCJwYXJzZUZsb2F0Iiwib2Zmc2V0VG9QeCIsIm9mZnNldCIsInNpemUiLCJnZXRCb3VuZGluZ1JlY3QiLCJ0ZXRoZXIiLCJ0byIsInNjcm9sbFBhcmVudHMiLCJwYWdlWE9mZnNldCIsInBhZ2VZT2Zmc2V0IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwicG9zIiwid2luIiwiQk9VTkRTX0ZPUk1BVCIsInNpZGUiLCJpIiwidG9VcHBlckNhc2UiLCJzdWJzdHIiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZGVmaW5lUHJvcGVydHkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJUZXRoZXJCYXNlIiwidW5kZWZpbmVkIiwibW9kdWxlcyIsInVuaXF1ZUlkIiwiaWQiLCJ6ZXJvUG9zQ2FjaGUiLCJnZXRBdHRyaWJ1dGUiLCJkZWZlciIsImRlZmVycmVkIiwiZm4iLCJmbHVzaCIsInBvcCIsIkV2ZW50ZWQiLCJldmVudCIsImhhbmRsZXIiLCJjdHgiLCJvbmNlIiwiYmluZGluZ3MiLCJvbiIsInNwbGljZSIsIl9iaW5kaW5ncyRldmVudCRpIiwiY29udGV4dCIsIlV0aWxzIiwiX3NsaWNlZFRvQXJyYXkiLCJzbGljZUl0ZXJhdG9yIiwiYXJyIiwiX2FyciIsIl9uIiwiX2QiLCJfZSIsIl9zIiwiX2kiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwicmV0dXJuIiwiaXNBcnJheSIsIl9nZXQiLCJfeDYiLCJfeDciLCJfeDgiLCJfYWdhaW4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInJlY2VpdmVyIiwiRnVuY3Rpb24iLCJkZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0dGVyIiwiZ2V0IiwiZ2V0UHJvdG90eXBlT2YiLCJFcnJvciIsIl9UZXRoZXJCYXNlJFV0aWxzIiwidHJhbnNmb3JtS2V5IiwidHJhbnNmb3JtcyIsInRldGhlcnMiLCJsYXN0Q2FsbCIsImxhc3REdXJhdGlvbiIsInBlbmRpbmdUaW1lb3V0IiwidGljayIsIk1hdGgiLCJtaW4iLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsIk1JUlJPUl9MUiIsImNlbnRlciIsIk1JUlJPUl9UQiIsIm1pZGRsZSIsIk9GRlNFVF9NQVAiLCJhdXRvVG9GaXhlZEF0dGFjaG1lbnQiLCJhdHRhY2htZW50IiwicmVsYXRpdmVUb0F0dGFjaG1lbnQiLCJhdHRhY2htZW50VG9PZmZzZXQiLCJwYXJzZU9mZnNldCIsIl92YWx1ZSRzcGxpdCIsIl92YWx1ZSRzcGxpdDIiLCJwYXJzZUF0dGFjaG1lbnQiLCJUZXRoZXJDbGFzcyIsIl9FdmVudGVkIiwib3B0aW9ucyIsIl90aGlzIiwiYmluZCIsImhpc3RvcnkiLCJzZXRPcHRpb25zIiwiaW5pdGlhbGl6ZSIsImNsYXNzZXMiLCJjbGFzc1ByZWZpeCIsIl90aGlzMiIsImRlZmF1bHRzIiwidGFyZ2V0T2Zmc2V0IiwidGFyZ2V0QXR0YWNobWVudCIsIl9vcHRpb25zIiwiZWxlbWVudCIsInRhcmdldE1vZGlmaWVyIiwianF1ZXJ5IiwicXVlcnlTZWxlY3RvciIsImdldENsYXNzIiwiYWRkVGFyZ2V0Q2xhc3NlcyIsImRpc2FibGUiLCJlbmFibGVkIiwiZW5hYmxlIiwiYm91bmRzIiwic2Nyb2xsQm90dG9tIiwiYm9yZGVyVG9wV2lkdGgiLCJib3JkZXJCb3R0b21XaWR0aCIsImJvcmRlckxlZnRXaWR0aCIsImZpdEFkaiIsInBvdyIsIm1heCIsInNjcm9sbFBlcmNlbnRhZ2UiLCJzY3JvbGxUb3AiLCJfY2FjaGUiLCJfdGhpczMiLCJfdGhpczQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX3RoaXM1IiwiZWxlbWVudEF0dGFjaCIsInRhcmdldEF0dGFjaCIsIl90aGlzNiIsInNpZGVzIiwiX2FkZEF0dGFjaENsYXNzZXMiLCJfdGhpczciLCJmbHVzaENoYW5nZXMiLCJjbGVhckNhY2hlIiwidXBkYXRlQXR0YWNoQ2xhc3NlcyIsImVsZW1lbnRQb3MiLCJjYWNoZSIsImxhc3RTaXplIiwiX2xhc3RTaXplIiwidGFyZ2V0UG9zIiwiZ2V0VGFyZ2V0Qm91bmRzIiwidGFyZ2V0U2l6ZSIsIm1hbnVhbE9mZnNldCIsIm1hbnVhbFRhcmdldE9mZnNldCIsInJldCIsInNjcm9sbGJhclNpemUiLCJwYWdlIiwidmlld3BvcnQiLCJwYXJlbnRFbGVtZW50Iiwib3B0aW1pemF0aW9ucyIsIm1vdmVFbGVtZW50Iiwib2Zmc2V0UG9zaXRpb24iLCJvZmZzZXRQYXJlbnRTdHlsZSIsIm9mZnNldFBhcmVudFNpemUiLCJvZmZzZXRCb3JkZXIiLCJ0b0xvd2VyQ2FzZSIsInNjcm9sbExlZnQiLCJtb3ZlIiwidW5zaGlmdCIsIl90aGlzOCIsInNhbWUiLCJ0eXBlIiwiZm91bmQiLCJwb2ludCIsImNzcyIsInRyYW5zY3JpYmUiLCJfc2FtZSIsIl9wb3MiLCJncHUiLCJ5UG9zIiwieFBvcyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwicm91bmQiLCJtb3ZlZCIsImJvZHlFbGVtZW50Iiwib2Zmc2V0UGFyZW50SXNCb2R5IiwiY3VycmVudE5vZGUiLCJ0YWdOYW1lIiwid3JpdGVDU1MiLCJ3cml0ZSIsInZhbCIsInRyaWdnZXIiLCJjb25zdHJhaW50cyIsInRhcmdldEhlaWdodCIsInRhcmdldFdpZHRoIiwiYWxsQ2xhc3NlcyIsImNvbnN0cmFpbnQiLCJvdXRPZkJvdW5kc0NsYXNzIiwicGlubmVkQ2xhc3MiLCJhZGRDbGFzc2VzIiwidEF0dGFjaG1lbnQiLCJlQXR0YWNobWVudCIsInBpbiIsImNoYW5nZUF0dGFjaFgiLCJjaGFuZ2VBdHRhY2hZIiwiX2F0dGFjaG1lbnQkc3BsaXQiLCJfYXR0YWNobWVudCRzcGxpdDIiLCJtYXAiLCJwIiwicGlubmVkIiwib29iIiwib29iQ2xhc3MiLCJhYnV0dGVkIiwidGFyZ2V0UG9zU2lkZSIsInNoaWZ0Iiwic2hpZnRUb3AiLCJzaGlmdExlZnQiLCJfc2hpZnQyIl0sIm1hcHBpbmdzIjoiQ0FFQyxTQUFTQSxFQUFNQyxHQUNRLG1CQUFYQyxRQUF5QkEsT0FBT0MsSUFDekNELE9BQU9ELEdBQ3FCLGlCQUFaRyxRQUNoQkMsT0FBT0QsUUFBVUgsRUFBUUssUUFBU0YsUUFBU0MsUUFFM0NMLEVBQUtPLE9BQVNOLElBTmpCLENBUUNPLEtBQU0sU0FBU0YsRUFBU0YsRUFBU0MsR0FFbkMsYUFJQSxTQUFTSSxFQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxhQUFvQkMsR0FBZ0IsTUFBTSxJQUFJQyxVQUFVLHFDQVdoSCxTQUFT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QVEsR0FFcEJGLEVBQVdsTyxXQUFXa08sRUFBVSxJQUNoQ0MsRUFBWW5PLFdBQVdtTyxFQUFXLFNBRWxDRCxFQUFXRCxFQUFNblYsSUFDakJxVixFQUFZRixFQUFNalYsS0FNcEIsT0FIQUYsR0FBT29WLEVBQ1BsVixHQUFRbVYsR0FFQ3JWLElBQUtBLEVBQUtFLEtBQU1BLE9BR3RCcEIiLCJmaWxlIjoidGV0aGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohIHRldGhlciAxLjQuMCAqL1xuXG4oZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKGZhY3RvcnkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpO1xuICB9IGVsc2Uge1xuICAgIHJvb3QuVGV0aGVyID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkge1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG52YXIgVGV0aGVyQmFzZSA9IHVuZGVmaW5lZDtcbmlmICh0eXBlb2YgVGV0aGVyQmFzZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgVGV0aGVyQmFzZSA9IHsgbW9kdWxlczogW10gfTtcbn1cblxudmFyIHplcm9FbGVtZW50ID0gbnVsbDtcblxuLy8gU2FtZSBhcyBuYXRpdmUgZ2V0Qm91bmRpbmdDbGllbnRSZWN0LCBleGNlcHQgaXQgdGFrZXMgaW50byBhY2NvdW50IHBhcmVudCA8ZnJhbWU+IG9mZnNldHNcbi8vIGlmIHRoZSBlbGVtZW50IGxpZXMgd2l0aGluIGEgbmVzdGVkIGRvY3VtZW50ICg8ZnJhbWU+IG9yIDxpZnJhbWU+LWxpa2UpLlxuZnVuY3Rpb24gZ2V0QWN0dWFsQm91bmRpbmdDbGllbnRSZWN0KG5vZGUpIHtcbiAgdmFyIGJvdW5kaW5nUmVjdCA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgLy8gVGhlIG9yaWdpbmFsIG9iamVjdCByZXR1cm5lZCBieSBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgaW1tdXRhYmxlLCBzbyB3ZSBjbG9uZSBpdFxuICAvLyBXZSBjYW4ndCB1c2UgZXh0ZW5kIGJlY2F1c2UgdGhlIHByb3BlcnRpZXMgYXJlIG5vdCBjb25zaWRlcmVkIHBhcnQgb2YgdGhlIG9iamVjdCBieSBoYXNPd25Qcm9wZXJ0eSBpbiBJRTlcbiAgdmFyIHJlY3QgPSB7fTtcbiAgZm9yICh2YXIgayBpbiBib3VuZGluZ1JlY3QpIHtcbiAgICByZWN0W2tdID0gYm91bmRpbmdSZWN0W2tdO1xuICB9XG5cbiAgaWYgKG5vZGUub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQpIHtcbiAgICB2YXIgX2ZyYW1lRWxlbWVudCA9IG5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5mcmFtZUVsZW1lbnQ7XG4gICAgaWYgKF9mcmFtZUVsZW1lbnQpIHtcbiAgICAgIHZhciBmcmFtZVJlY3QgPSBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3QoX2ZyYW1lRWxlbWVudCk7XG4gICAgICByZWN0LnRvcCArPSBmcmFtZVJlY3QudG9wO1xuICAgICAgcmVjdC5ib3R0b20gKz0gZnJhbWVSZWN0LnRvcDtcbiAgICAgIHJlY3QubGVmdCArPSBmcmFtZVJlY3QubGVmdDtcbiAgICAgIHJlY3QucmlnaHQgKz0gZnJhbWVSZWN0LmxlZnQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlY3Q7XG59XG5cbmZ1bmN0aW9uIGdldFNjcm9sbFBhcmVudHMoZWwpIHtcbiAgLy8gSW4gZmlyZWZveCBpZiB0aGUgZWwgaXMgaW5zaWRlIGFuIGlmcmFtZSB3aXRoIGRpc3BsYXk6IG5vbmU7IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCkgd2lsbCByZXR1cm4gbnVsbDtcbiAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NTQ4Mzk3XG4gIHZhciBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbCkgfHwge307XG4gIHZhciBwb3NpdGlvbiA9IGNvbXB1dGVkU3R5bGUucG9zaXRpb247XG4gIHZhciBwYXJlbnRzID0gW107XG5cbiAgaWYgKHBvc2l0aW9uID09PSAnZml4ZWQnKSB7XG4gICAgcmV0dXJuIFtlbF07XG4gIH1cblxuICB2YXIgcGFyZW50ID0gZWw7XG4gIHdoaWxlICgocGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGUpICYmIHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgPT09IDEpIHtcbiAgICB2YXIgc3R5bGUgPSB1bmRlZmluZWQ7XG4gICAgdHJ5IHtcbiAgICAgIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnQpO1xuICAgIH0gY2F0Y2ggKGVycikge31cblxuICAgIGlmICh0eXBlb2Ygc3R5bGUgPT09ICd1bmRlZmluZWQnIHx8IHN0eWxlID09PSBudWxsKSB7XG4gICAgICBwYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgIHJldHVybiBwYXJlbnRzO1xuICAgIH1cblxuICAgIHZhciBfc3R5bGUgPSBzdHlsZTtcbiAgICB2YXIgb3ZlcmZsb3cgPSBfc3R5bGUub3ZlcmZsb3c7XG4gICAgdmFyIG92ZXJmbG93WCA9IF9zdHlsZS5vdmVyZmxvd1g7XG4gICAgdmFyIG92ZXJmbG93WSA9IF9zdHlsZS5vdmVyZmxvd1k7XG5cbiAgICBpZiAoLyhhdXRvfHNjcm9sbCkvLnRlc3Qob3ZlcmZsb3cgKyBvdmVyZmxvd1kgKyBvdmVyZmxvd1gpKSB7XG4gICAgICBpZiAocG9zaXRpb24gIT09ICdhYnNvbHV0ZScgfHwgWydyZWxhdGl2ZScsICdhYnNvbHV0ZScsICdmaXhlZCddLmluZGV4T2Yoc3R5bGUucG9zaXRpb24pID49IDApIHtcbiAgICAgICAgcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcGFyZW50cy5wdXNoKGVsLm93bmVyRG9jdW1lbnQuYm9keSk7XG5cbiAgLy8gSWYgdGhlIG5vZGUgaXMgd2l0aGluIGEgZnJhbWUsIGFjY291bnQgZm9yIHRoZSBwYXJlbnQgd2luZG93IHNjcm9sbFxuICBpZiAoZWwub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQpIHtcbiAgICBwYXJlbnRzLnB1c2goZWwub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldyk7XG4gIH1cblxuICByZXR1cm4gcGFyZW50cztcbn1cblxudmFyIHVuaXF1ZUlkID0gKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGlkID0gMDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKytpZDtcbiAgfTtcbn0pKCk7XG5cbnZhciB6ZXJvUG9zQ2FjaGUgPSB7fTtcbnZhciBnZXRPcmlnaW4gPSBmdW5jdGlvbiBnZXRPcmlnaW4oKSB7XG4gIC8vIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBpcyB1bmZvcnR1bmF0ZWx5IHRvbyBhY2N1cmF0ZS4gIEl0IGludHJvZHVjZXMgYSBwaXhlbCBvciB0d28gb2ZcbiAgLy8gaml0dGVyIGFzIHRoZSB1c2VyIHNjcm9sbHMgdGhhdCBtZXNzZXMgd2l0aCBvdXIgYWJpbGl0eSB0byBkZXRlY3QgaWYgdHdvIHBvc2l0aW9uc1xuICAvLyBhcmUgZXF1aXZpbGFudCBvciBub3QuICBXZSBwbGFjZSBhbiBlbGVtZW50IGF0IHRoZSB0b3AgbGVmdCBvZiB0aGUgcGFnZSB0aGF0IHdpbGxcbiAgLy8gZ2V0IHRoZSBzYW1lIGppdHRlciwgc28gd2UgY2FuIGNhbmNlbCB0aGUgdHdvIG91dC5cbiAgdmFyIG5vZGUgPSB6ZXJvRWxlbWVudDtcbiAgaWYgKCFub2RlIHx8ICFkb2N1bWVudC5ib2R5LmNvbnRhaW5zKG5vZGUpKSB7XG4gICAgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLXRldGhlci1pZCcsIHVuaXF1ZUlkKCkpO1xuICAgIGV4dGVuZChub2RlLnN0eWxlLCB7XG4gICAgICB0b3A6IDAsXG4gICAgICBsZWZ0OiAwLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZSdcbiAgICB9KTtcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobm9kZSk7XG5cbiAgICB6ZXJvRWxlbWVudCA9IG5vZGU7XG4gIH1cblxuICB2YXIgaWQgPSBub2RlLmdldEF0dHJpYnV0ZSgnZGF0YS10ZXRoZXItaWQnKTtcbiAgaWYgKHR5cGVvZiB6ZXJvUG9zQ2FjaGVbaWRdID09PSAndW5kZWZpbmVkJykge1xuICAgIHplcm9Qb3NDYWNoZVtpZF0gPSBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3Qobm9kZSk7XG5cbiAgICAvLyBDbGVhciB0aGUgY2FjaGUgd2hlbiB0aGlzIHBvc2l0aW9uIGNhbGwgaXMgZG9uZVxuICAgIGRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIGRlbGV0ZSB6ZXJvUG9zQ2FjaGVbaWRdO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHplcm9Qb3NDYWNoZVtpZF07XG59O1xuXG5mdW5jdGlvbiByZW1vdmVVdGlsRWxlbWVudHMoKSB7XG4gIGlmICh6ZXJvRWxlbWVudCkge1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoemVyb0VsZW1lbnQpO1xuICB9XG4gIHplcm9FbGVtZW50ID0gbnVsbDtcbn07XG5cbmZ1bmN0aW9uIGdldEJvdW5kcyhlbCkge1xuICB2YXIgZG9jID0gdW5kZWZpbmVkO1xuICBpZiAoZWwgPT09IGRvY3VtZW50KSB7XG4gICAgZG9jID0gZG9jdW1lbnQ7XG4gICAgZWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIH0gZWxzZSB7XG4gICAgZG9jID0gZWwub3duZXJEb2N1bWVudDtcbiAgfVxuXG4gIHZhciBkb2NFbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgdmFyIGJveCA9IGdldEFjdHVhbEJvdW5kaW5nQ2xpZW50UmVjdChlbCk7XG5cbiAgdmFyIG9yaWdpbiA9IGdldE9yaWdpbigpO1xuXG4gIGJveC50b3AgLT0gb3JpZ2luLnRvcDtcbiAgYm94LmxlZnQgLT0gb3JpZ2luLmxlZnQ7XG5cbiAgaWYgKHR5cGVvZiBib3gud2lkdGggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgYm94LndpZHRoID0gZG9jdW1lbnQuYm9keS5zY3JvbGxXaWR0aCAtIGJveC5sZWZ0IC0gYm94LnJpZ2h0O1xuICB9XG4gIGlmICh0eXBlb2YgYm94LmhlaWdodCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBib3guaGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQgLSBib3gudG9wIC0gYm94LmJvdHRvbTtcbiAgfVxuXG4gIGJveC50b3AgPSBib3gudG9wIC0gZG9jRWwuY2xpZW50VG9wO1xuICBib3gubGVmdCA9IGJveC5sZWZ0IC0gZG9jRWwuY2xpZW50TGVmdDtcbiAgYm94LnJpZ2h0ID0gZG9jLmJvZHkuY2xpZW50V2lkdGggLSBib3gud2lkdGggLSBib3gubGVmdDtcbiAgYm94LmJvdHRvbSA9IGRvYy5ib2R5LmNsaWVudEhlaWdodCAtIGJveC5oZWlnaHQgLSBib3gudG9wO1xuXG4gIHJldHVybiBib3g7XG59XG5cbmZ1bmN0aW9uIGdldE9mZnNldFBhcmVudChlbCkge1xuICByZXR1cm4gZWwub2Zmc2V0UGFyZW50IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbn1cblxudmFyIF9zY3JvbGxCYXJTaXplID0gbnVsbDtcbmZ1bmN0aW9uIGdldFNjcm9sbEJhclNpemUoKSB7XG4gIGlmIChfc2Nyb2xsQmFyU2l6ZSkge1xuICAgIHJldHVybiBfc2Nyb2xsQmFyU2l6ZTtcbiAgfVxuICB2YXIgaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgaW5uZXIuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gIGlubmVyLnN0eWxlLmhlaWdodCA9ICcyMDBweCc7XG5cbiAgdmFyIG91dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGV4dGVuZChvdXRlci5zdHlsZSwge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRvcDogMCxcbiAgICBsZWZ0OiAwLFxuICAgIHBvaW50ZXJFdmVudHM6ICdub25lJyxcbiAgICB2aXNpYmlsaXR5OiAnaGlkZGVuJyxcbiAgICB3aWR0aDogJzIwMHB4JyxcbiAgICBoZWlnaHQ6ICcxNTBweCcsXG4gICAgb3ZlcmZsb3c6ICdoaWRkZW4nXG4gIH0pO1xuXG4gIG91dGVyLmFwcGVuZENoaWxkKGlubmVyKTtcblxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG91dGVyKTtcblxuICB2YXIgd2lkdGhDb250YWluZWQgPSBpbm5lci5vZmZzZXRXaWR0aDtcbiAgb3V0ZXIuc3R5bGUub3ZlcmZsb3cgPSAnc2Nyb2xsJztcbiAgdmFyIHdpZHRoU2Nyb2xsID0gaW5uZXIub2Zmc2V0V2lkdGg7XG5cbiAgaWYgKHdpZHRoQ29udGFpbmVkID09PSB3aWR0aFNjcm9sbCkge1xuICAgIHdpZHRoU2Nyb2xsID0gb3V0ZXIuY2xpZW50V2lkdGg7XG4gIH1cblxuICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG91dGVyKTtcblxuICB2YXIgd2lkdGggPSB3aWR0aENvbnRhaW5lZCAtIHdpZHRoU2Nyb2xsO1xuXG4gIF9zY3JvbGxCYXJTaXplID0geyB3aWR0aDogd2lkdGgsIGhlaWdodDogd2lkdGggfTtcbiAgcmV0dXJuIF9zY3JvbGxCYXJTaXplO1xufVxuXG5mdW5jdGlvbiBleHRlbmQoKSB7XG4gIHZhciBvdXQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcblxuICB2YXIgYXJncyA9IFtdO1xuXG4gIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGFyZ3MsIGFyZ3VtZW50cyk7XG5cbiAgYXJncy5zbGljZSgxKS5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICBpZiAob2JqKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmICgoe30pLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgICAgb3V0W2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIG91dDtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIG5hbWUpIHtcbiAgaWYgKHR5cGVvZiBlbC5jbGFzc0xpc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbmFtZS5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuICAgICAgaWYgKGNscy50cmltKCkpIHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbHMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoJyhefCApJyArIG5hbWUuc3BsaXQoJyAnKS5qb2luKCd8JykgKyAnKCB8JCknLCAnZ2knKTtcbiAgICB2YXIgY2xhc3NOYW1lID0gZ2V0Q2xhc3NOYW1lKGVsKS5yZXBsYWNlKHJlZ2V4LCAnICcpO1xuICAgIHNldENsYXNzTmFtZShlbCwgY2xhc3NOYW1lKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhZGRDbGFzcyhlbCwgbmFtZSkge1xuICBpZiAodHlwZW9mIGVsLmNsYXNzTGlzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBuYW1lLnNwbGl0KCcgJykuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7XG4gICAgICBpZiAoY2xzLnRyaW0oKSkge1xuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGNscyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmVtb3ZlQ2xhc3MoZWwsIG5hbWUpO1xuICAgIHZhciBjbHMgPSBnZXRDbGFzc05hbWUoZWwpICsgKCcgJyArIG5hbWUpO1xuICAgIHNldENsYXNzTmFtZShlbCwgY2xzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYXNDbGFzcyhlbCwgbmFtZSkge1xuICBpZiAodHlwZW9mIGVsLmNsYXNzTGlzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKG5hbWUpO1xuICB9XG4gIHZhciBjbGFzc05hbWUgPSBnZXRDbGFzc05hbWUoZWwpO1xuICByZXR1cm4gbmV3IFJlZ0V4cCgnKF58ICknICsgbmFtZSArICcoIHwkKScsICdnaScpLnRlc3QoY2xhc3NOYW1lKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2xhc3NOYW1lKGVsKSB7XG4gIC8vIENhbid0IHVzZSBqdXN0IFNWR0FuaW1hdGVkU3RyaW5nIGhlcmUgc2luY2Ugbm9kZXMgd2l0aGluIGEgRnJhbWUgaW4gSUUgaGF2ZVxuICAvLyBjb21wbGV0ZWx5IHNlcGFyYXRlbHkgU1ZHQW5pbWF0ZWRTdHJpbmcgYmFzZSBjbGFzc2VzXG4gIGlmIChlbC5jbGFzc05hbWUgaW5zdGFuY2VvZiBlbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LlNWR0FuaW1hdGVkU3RyaW5nKSB7XG4gICAgcmV0dXJuIGVsLmNsYXNzTmFtZS5iYXNlVmFsO1xuICB9XG4gIHJldHVybiBlbC5jbGFzc05hbWU7XG59XG5cbmZ1bmN0aW9uIHNldENsYXNzTmFtZShlbCwgY2xhc3NOYW1lKSB7XG4gIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbGFzc05hbWUpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVDbGFzc2VzKGVsLCBhZGQsIGFsbCkge1xuICAvLyBPZiB0aGUgc2V0IG9mICdhbGwnIGNsYXNzZXMsIHdlIG5lZWQgdGhlICdhZGQnIGNsYXNzZXMsIGFuZCBvbmx5IHRoZVxuICAvLyAnYWRkJyBjbGFzc2VzIHRvIGJlIHNldC5cbiAgYWxsLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuICAgIGlmIChhZGQuaW5kZXhPZihjbHMpID09PSAtMSAmJiBoYXNDbGFzcyhlbCwgY2xzKSkge1xuICAgICAgcmVtb3ZlQ2xhc3MoZWwsIGNscyk7XG4gICAgfVxuICB9KTtcblxuICBhZGQuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7XG4gICAgaWYgKCFoYXNDbGFzcyhlbCwgY2xzKSkge1xuICAgICAgYWRkQ2xhc3MoZWwsIGNscyk7XG4gICAgfVxuICB9KTtcbn1cblxudmFyIGRlZmVycmVkID0gW107XG5cbnZhciBkZWZlciA9IGZ1bmN0aW9uIGRlZmVyKGZuKSB7XG4gIGRlZmVycmVkLnB1c2goZm4pO1xufTtcblxudmFyIGZsdXNoID0gZnVuY3Rpb24gZmx1c2goKSB7XG4gIHZhciBmbiA9IHVuZGVmaW5lZDtcbiAgd2hpbGUgKGZuID0gZGVmZXJyZWQucG9wKCkpIHtcbiAgICBmbigpO1xuICB9XG59O1xuXG52YXIgRXZlbnRlZCA9IChmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEV2ZW50ZWQoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEV2ZW50ZWQpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEV2ZW50ZWQsIFt7XG4gICAga2V5OiAnb24nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbihldmVudCwgaGFuZGxlciwgY3R4KSB7XG4gICAgICB2YXIgb25jZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzNdO1xuXG4gICAgICBpZiAodHlwZW9mIHRoaXMuYmluZGluZ3MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuYmluZGluZ3MgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5iaW5kaW5nc1tldmVudF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuYmluZGluZ3NbZXZlbnRdID0gW107XG4gICAgICB9XG4gICAgICB0aGlzLmJpbmRpbmdzW2V2ZW50XS5wdXNoKHsgaGFuZGxlcjogaGFuZGxlciwgY3R4OiBjdHgsIG9uY2U6IG9uY2UgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25jZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uY2UoZXZlbnQsIGhhbmRsZXIsIGN0eCkge1xuICAgICAgdGhpcy5vbihldmVudCwgaGFuZGxlciwgY3R4LCB0cnVlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvZmYnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvZmYoZXZlbnQsIGhhbmRsZXIpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5iaW5kaW5ncyA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHRoaXMuYmluZGluZ3NbZXZlbnRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuYmluZGluZ3NbZXZlbnRdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHRoaXMuYmluZGluZ3NbZXZlbnRdLmxlbmd0aCkge1xuICAgICAgICAgIGlmICh0aGlzLmJpbmRpbmdzW2V2ZW50XVtpXS5oYW5kbGVyID09PSBoYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRpbmdzW2V2ZW50XS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICsraTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICd0cmlnZ2VyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdHJpZ2dlcihldmVudCkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLmJpbmRpbmdzICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLmJpbmRpbmdzW2V2ZW50XSkge1xuICAgICAgICB2YXIgaSA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAoaSA8IHRoaXMuYmluZGluZ3NbZXZlbnRdLmxlbmd0aCkge1xuICAgICAgICAgIHZhciBfYmluZGluZ3MkZXZlbnQkaSA9IHRoaXMuYmluZGluZ3NbZXZlbnRdW2ldO1xuICAgICAgICAgIHZhciBoYW5kbGVyID0gX2JpbmRpbmdzJGV2ZW50JGkuaGFuZGxlcjtcbiAgICAgICAgICB2YXIgY3R4ID0gX2JpbmRpbmdzJGV2ZW50JGkuY3R4O1xuICAgICAgICAgIHZhciBvbmNlID0gX2JpbmRpbmdzJGV2ZW50JGkub25jZTtcblxuICAgICAgICAgIHZhciBjb250ZXh0ID0gY3R4O1xuICAgICAgICAgIGlmICh0eXBlb2YgY29udGV4dCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGhhbmRsZXIuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cbiAgICAgICAgICBpZiAob25jZSkge1xuICAgICAgICAgICAgdGhpcy5iaW5kaW5nc1tldmVudF0uc3BsaWNlKGksIDEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICArK2k7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEV2ZW50ZWQ7XG59KSgpO1xuXG5UZXRoZXJCYXNlLlV0aWxzID0ge1xuICBnZXRBY3R1YWxCb3VuZGluZ0NsaWVudFJlY3Q6IGdldEFjdHVhbEJvdW5kaW5nQ2xpZW50UmVjdCxcbiAgZ2V0U2Nyb2xsUGFyZW50czogZ2V0U2Nyb2xsUGFyZW50cyxcbiAgZ2V0Qm91bmRzOiBnZXRCb3VuZHMsXG4gIGdldE9mZnNldFBhcmVudDogZ2V0T2Zmc2V0UGFyZW50LFxuICBleHRlbmQ6IGV4dGVuZCxcbiAgYWRkQ2xhc3M6IGFkZENsYXNzLFxuICByZW1vdmVDbGFzczogcmVtb3ZlQ2xhc3MsXG4gIGhhc0NsYXNzOiBoYXNDbGFzcyxcbiAgdXBkYXRlQ2xhc3NlczogdXBkYXRlQ2xhc3NlcyxcbiAgZGVmZXI6IGRlZmVyLFxuICBmbHVzaDogZmx1c2gsXG4gIHVuaXF1ZUlkOiB1bmlxdWVJZCxcbiAgRXZlbnRlZDogRXZlbnRlZCxcbiAgZ2V0U2Nyb2xsQmFyU2l6ZTogZ2V0U2Nyb2xsQmFyU2l6ZSxcbiAgcmVtb3ZlVXRpbEVsZW1lbnRzOiByZW1vdmVVdGlsRWxlbWVudHNcbn07XG4vKiBnbG9iYWxzIFRldGhlckJhc2UsIHBlcmZvcm1hbmNlICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF9zbGljZWRUb0FycmF5ID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbJ3JldHVybiddKSBfaVsncmV0dXJuJ10oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZScpOyB9IH07IH0pKCk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cbnZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94NiwgX3g3LCBfeDgpIHsgdmFyIF9hZ2FpbiA9IHRydWU7IF9mdW5jdGlvbjogd2hpbGUgKF9hZ2FpbikgeyB2YXIgb2JqZWN0ID0gX3g2LCBwcm9wZXJ0eSA9IF94NywgcmVjZWl2ZXIgPSBfeDg7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3g2ID0gcGFyZW50OyBfeDcgPSBwcm9wZXJ0eTsgX3g4ID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGRlc2MgPSBwYXJlbnQgPSB1bmRlZmluZWQ7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKCd2YWx1ZScgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH0gfTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICcgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmlmICh0eXBlb2YgVGV0aGVyQmFzZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBpbmNsdWRlIHRoZSB1dGlscy5qcyBmaWxlIGJlZm9yZSB0ZXRoZXIuanMnKTtcbn1cblxudmFyIF9UZXRoZXJCYXNlJFV0aWxzID0gVGV0aGVyQmFzZS5VdGlscztcbnZhciBnZXRTY3JvbGxQYXJlbnRzID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0U2Nyb2xsUGFyZW50cztcbnZhciBnZXRCb3VuZHMgPSBfVGV0aGVyQmFzZSRVdGlscy5nZXRCb3VuZHM7XG52YXIgZ2V0T2Zmc2V0UGFyZW50ID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0T2Zmc2V0UGFyZW50O1xudmFyIGV4dGVuZCA9IF9UZXRoZXJCYXNlJFV0aWxzLmV4dGVuZDtcbnZhciBhZGRDbGFzcyA9IF9UZXRoZXJCYXNlJFV0aWxzLmFkZENsYXNzO1xudmFyIHJlbW92ZUNsYXNzID0gX1RldGhlckJhc2UkVXRpbHMucmVtb3ZlQ2xhc3M7XG52YXIgdXBkYXRlQ2xhc3NlcyA9IF9UZXRoZXJCYXNlJFV0aWxzLnVwZGF0ZUNsYXNzZXM7XG52YXIgZGVmZXIgPSBfVGV0aGVyQmFzZSRVdGlscy5kZWZlcjtcbnZhciBmbHVzaCA9IF9UZXRoZXJCYXNlJFV0aWxzLmZsdXNoO1xudmFyIGdldFNjcm9sbEJhclNpemUgPSBfVGV0aGVyQmFzZSRVdGlscy5nZXRTY3JvbGxCYXJTaXplO1xudmFyIHJlbW92ZVV0aWxFbGVtZW50cyA9IF9UZXRoZXJCYXNlJFV0aWxzLnJlbW92ZVV0aWxFbGVtZW50cztcblxuZnVuY3Rpb24gd2l0aGluKGEsIGIpIHtcbiAgdmFyIGRpZmYgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyAxIDogYXJndW1lbnRzWzJdO1xuXG4gIHJldHVybiBhICsgZGlmZiA+PSBiICYmIGIgPj0gYSAtIGRpZmY7XG59XG5cbnZhciB0cmFuc2Zvcm1LZXkgPSAoZnVuY3Rpb24gKCkge1xuICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiAnJztcbiAgfVxuICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICB2YXIgdHJhbnNmb3JtcyA9IFsndHJhbnNmb3JtJywgJ1dlYmtpdFRyYW5zZm9ybScsICdPVHJhbnNmb3JtJywgJ01velRyYW5zZm9ybScsICdtc1RyYW5zZm9ybSddO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYW5zZm9ybXMubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIga2V5ID0gdHJhbnNmb3Jtc1tpXTtcbiAgICBpZiAoZWwuc3R5bGVba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4ga2V5O1xuICAgIH1cbiAgfVxufSkoKTtcblxudmFyIHRldGhlcnMgPSBbXTtcblxudmFyIHBvc2l0aW9uID0gZnVuY3Rpb24gcG9zaXRpb24oKSB7XG4gIHRldGhlcnMuZm9yRWFjaChmdW5jdGlvbiAodGV0aGVyKSB7XG4gICAgdGV0aGVyLnBvc2l0aW9uKGZhbHNlKTtcbiAgfSk7XG4gIGZsdXNoKCk7XG59O1xuXG5mdW5jdGlvbiBub3coKSB7XG4gIGlmICh0eXBlb2YgcGVyZm9ybWFuY2UgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwZXJmb3JtYW5jZS5ub3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHBlcmZvcm1hbmNlLm5vdygpO1xuICB9XG4gIHJldHVybiArbmV3IERhdGUoKTtcbn1cblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGxhc3RDYWxsID0gbnVsbDtcbiAgdmFyIGxhc3REdXJhdGlvbiA9IG51bGw7XG4gIHZhciBwZW5kaW5nVGltZW91dCA9IG51bGw7XG5cbiAgdmFyIHRpY2sgPSBmdW5jdGlvbiB0aWNrKCkge1xuICAgIGlmICh0eXBlb2YgbGFzdER1cmF0aW9uICE9PSAndW5kZWZpbmVkJyAmJiBsYXN0RHVyYXRpb24gPiAxNikge1xuICAgICAgLy8gV2Ugdm9sdW50YXJpbHkgdGhyb3R0bGUgb3Vyc2VsdmVzIGlmIHdlIGNhbid0IG1hbmFnZSA2MGZwc1xuICAgICAgbGFzdER1cmF0aW9uID0gTWF0aC5taW4obGFzdER1cmF0aW9uIC0gMTYsIDI1MCk7XG5cbiAgICAgIC8vIEp1c3QgaW4gY2FzZSB0aGlzIGlzIHRoZSBsYXN0IGV2ZW50LCByZW1lbWJlciB0byBwb3NpdGlvbiBqdXN0IG9uY2UgbW9yZVxuICAgICAgcGVuZGluZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KHRpY2ssIDI1MCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBsYXN0Q2FsbCAhPT0gJ3VuZGVmaW5lZCcgJiYgbm93KCkgLSBsYXN0Q2FsbCA8IDEwKSB7XG4gICAgICAvLyBTb21lIGJyb3dzZXJzIGNhbGwgZXZlbnRzIGEgbGl0dGxlIHRvbyBmcmVxdWVudGx5LCByZWZ1c2UgdG8gcnVuIG1vcmUgdGhhbiBpcyByZWFzb25hYmxlXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHBlbmRpbmdUaW1lb3V0ICE9IG51bGwpIHtcbiAgICAgIGNsZWFyVGltZW91dChwZW5kaW5nVGltZW91dCk7XG4gICAgICBwZW5kaW5nVGltZW91dCA9IG51bGw7XG4gICAgfVxuXG4gICAgbGFzdENhbGwgPSBub3coKTtcbiAgICBwb3NpdGlvbigpO1xuICAgIGxhc3REdXJhdGlvbiA9IG5vdygpIC0gbGFzdENhbGw7XG4gIH07XG5cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBbJ3Jlc2l6ZScsICdzY3JvbGwnLCAndG91Y2htb3ZlJ10uZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCB0aWNrKTtcbiAgICB9KTtcbiAgfVxufSkoKTtcblxudmFyIE1JUlJPUl9MUiA9IHtcbiAgY2VudGVyOiAnY2VudGVyJyxcbiAgbGVmdDogJ3JpZ2h0JyxcbiAgcmlnaHQ6ICdsZWZ0J1xufTtcblxudmFyIE1JUlJPUl9UQiA9IHtcbiAgbWlkZGxlOiAnbWlkZGxlJyxcbiAgdG9wOiAnYm90dG9tJyxcbiAgYm90dG9tOiAndG9wJ1xufTtcblxudmFyIE9GRlNFVF9NQVAgPSB7XG4gIHRvcDogMCxcbiAgbGVmdDogMCxcbiAgbWlkZGxlOiAnNTAlJyxcbiAgY2VudGVyOiAnNTAlJyxcbiAgYm90dG9tOiAnMTAwJScsXG4gIHJpZ2h0OiAnMTAwJSdcbn07XG5cbnZhciBhdXRvVG9GaXhlZEF0dGFjaG1lbnQgPSBmdW5jdGlvbiBhdXRvVG9GaXhlZEF0dGFjaG1lbnQoYXR0YWNobWVudCwgcmVsYXRpdmVUb0F0dGFjaG1lbnQpIHtcbiAgdmFyIGxlZnQgPSBhdHRhY2htZW50LmxlZnQ7XG4gIHZhciB0b3AgPSBhdHRhY2htZW50LnRvcDtcblxuICBpZiAobGVmdCA9PT0gJ2F1dG8nKSB7XG4gICAgbGVmdCA9IE1JUlJPUl9MUltyZWxhdGl2ZVRvQXR0YWNobWVudC5sZWZ0XTtcbiAgfVxuXG4gIGlmICh0b3AgPT09ICdhdXRvJykge1xuICAgIHRvcCA9IE1JUlJPUl9UQltyZWxhdGl2ZVRvQXR0YWNobWVudC50b3BdO1xuICB9XG5cbiAgcmV0dXJuIHsgbGVmdDogbGVmdCwgdG9wOiB0b3AgfTtcbn07XG5cbnZhciBhdHRhY2htZW50VG9PZmZzZXQgPSBmdW5jdGlvbiBhdHRhY2htZW50VG9PZmZzZXQoYXR0YWNobWVudCkge1xuICB2YXIgbGVmdCA9IGF0dGFjaG1lbnQubGVmdDtcbiAgdmFyIHRvcCA9IGF0dGFjaG1lbnQudG9wO1xuXG4gIGlmICh0eXBlb2YgT0ZGU0VUX01BUFthdHRhY2htZW50LmxlZnRdICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxlZnQgPSBPRkZTRVRfTUFQW2F0dGFjaG1lbnQubGVmdF07XG4gIH1cblxuICBpZiAodHlwZW9mIE9GRlNFVF9NQVBbYXR0YWNobWVudC50b3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgIHRvcCA9IE9GRlNFVF9NQVBbYXR0YWNobWVudC50b3BdO1xuICB9XG5cbiAgcmV0dXJuIHsgbGVmdDogbGVmdCwgdG9wOiB0b3AgfTtcbn07XG5cbmZ1bmN0aW9uIGFkZE9mZnNldCgpIHtcbiAgdmFyIG91dCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XG5cbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG9mZnNldHMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBvZmZzZXRzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgb2Zmc2V0cy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgdmFyIHRvcCA9IF9yZWYudG9wO1xuICAgIHZhciBsZWZ0ID0gX3JlZi5sZWZ0O1xuXG4gICAgaWYgKHR5cGVvZiB0b3AgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0b3AgPSBwYXJzZUZsb2F0KHRvcCwgMTApO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGxlZnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBsZWZ0ID0gcGFyc2VGbG9hdChsZWZ0LCAxMCk7XG4gICAgfVxuXG4gICAgb3V0LnRvcCArPSB0b3A7XG4gICAgb3V0LmxlZnQgKz0gbGVmdDtcbiAgfSk7XG5cbiAgcmV0dXJuIG91dDtcbn1cblxuZnVuY3Rpb24gb2Zmc2V0VG9QeChvZmZzZXQsIHNpemUpIHtcbiAgaWYgKHR5cGVvZiBvZmZzZXQubGVmdCA9PT0gJ3N0cmluZycgJiYgb2Zmc2V0LmxlZnQuaW5kZXhPZignJScpICE9PSAtMSkge1xuICAgIG9mZnNldC5sZWZ0ID0gcGFyc2VGbG9hdChvZmZzZXQubGVmdCwgMTApIC8gMTAwICogc2l6ZS53aWR0aDtcbiAgfVxuICBpZiAodHlwZW9mIG9mZnNldC50b3AgPT09ICdzdHJpbmcnICYmIG9mZnNldC50b3AuaW5kZXhPZignJScpICE9PSAtMSkge1xuICAgIG9mZnNldC50b3AgPSBwYXJzZUZsb2F0KG9mZnNldC50b3AsIDEwKSAvIDEwMCAqIHNpemUuaGVpZ2h0O1xuICB9XG5cbiAgcmV0dXJuIG9mZnNldDtcbn1cblxudmFyIHBhcnNlT2Zmc2V0ID0gZnVuY3Rpb24gcGFyc2VPZmZzZXQodmFsdWUpIHtcbiAgdmFyIF92YWx1ZSRzcGxpdCA9IHZhbHVlLnNwbGl0KCcgJyk7XG5cbiAgdmFyIF92YWx1ZSRzcGxpdDIgPSBfc2xpY2VkVG9BcnJheShfdmFsdWUkc3BsaXQsIDIpO1xuXG4gIHZhciB0b3AgPSBfdmFsdWUkc3BsaXQyWzBdO1xuICB2YXIgbGVmdCA9IF92YWx1ZSRzcGxpdDJbMV07XG5cbiAgcmV0dXJuIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfTtcbn07XG52YXIgcGFyc2VBdHRhY2htZW50ID0gcGFyc2VPZmZzZXQ7XG5cbnZhciBUZXRoZXJDbGFzcyA9IChmdW5jdGlvbiAoX0V2ZW50ZWQpIHtcbiAgX2luaGVyaXRzKFRldGhlckNsYXNzLCBfRXZlbnRlZCk7XG5cbiAgZnVuY3Rpb24gVGV0aGVyQ2xhc3Mob3B0aW9ucykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGV0aGVyQ2xhc3MpO1xuXG4gICAgX2dldChPYmplY3QuZ2V0UHJvdG90eXBlT2YoVGV0aGVyQ2xhc3MucHJvdG90eXBlKSwgJ2NvbnN0cnVjdG9yJywgdGhpcykuY2FsbCh0aGlzKTtcbiAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbi5iaW5kKHRoaXMpO1xuXG4gICAgdGV0aGVycy5wdXNoKHRoaXMpO1xuXG4gICAgdGhpcy5oaXN0b3J5ID0gW107XG5cbiAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucywgZmFsc2UpO1xuXG4gICAgVGV0aGVyQmFzZS5tb2R1bGVzLmZvckVhY2goZnVuY3Rpb24gKG1vZHVsZSkge1xuICAgICAgaWYgKHR5cGVvZiBtb2R1bGUuaW5pdGlhbGl6ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbW9kdWxlLmluaXRpYWxpemUuY2FsbChfdGhpcyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnBvc2l0aW9uKCk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoVGV0aGVyQ2xhc3MsIFt7XG4gICAga2V5OiAnZ2V0Q2xhc3MnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDbGFzcygpIHtcbiAgICAgIHZhciBrZXkgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyAnJyA6IGFyZ3VtZW50c1swXTtcbiAgICAgIHZhciBjbGFzc2VzID0gdGhpcy5vcHRpb25zLmNsYXNzZXM7XG5cbiAgICAgIGlmICh0eXBlb2YgY2xhc3NlcyAhPT0gJ3VuZGVmaW5lZCcgJiYgY2xhc3Nlc1trZXldKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xhc3Nlc1trZXldO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuY2xhc3NQcmVmaXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbGFzc1ByZWZpeCArICctJyArIGtleTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBrZXk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2V0T3B0aW9ucycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBwb3MgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB0cnVlIDogYXJndW1lbnRzWzFdO1xuXG4gICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgIG9mZnNldDogJzAgMCcsXG4gICAgICAgIHRhcmdldE9mZnNldDogJzAgMCcsXG4gICAgICAgIHRhcmdldEF0dGFjaG1lbnQ6ICdhdXRvIGF1dG8nLFxuICAgICAgICBjbGFzc1ByZWZpeDogJ3RldGhlcidcbiAgICAgIH07XG5cbiAgICAgIHRoaXMub3B0aW9ucyA9IGV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgIHZhciBlbGVtZW50ID0gX29wdGlvbnMuZWxlbWVudDtcbiAgICAgIHZhciB0YXJnZXQgPSBfb3B0aW9ucy50YXJnZXQ7XG4gICAgICB2YXIgdGFyZ2V0TW9kaWZpZXIgPSBfb3B0aW9ucy50YXJnZXRNb2RpZmllcjtcblxuICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgdGhpcy50YXJnZXRNb2RpZmllciA9IHRhcmdldE1vZGlmaWVyO1xuXG4gICAgICBpZiAodGhpcy50YXJnZXQgPT09ICd2aWV3cG9ydCcpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBkb2N1bWVudC5ib2R5O1xuICAgICAgICB0aGlzLnRhcmdldE1vZGlmaWVyID0gJ3Zpc2libGUnO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnRhcmdldCA9PT0gJ3Njcm9sbC1oYW5kbGUnKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgICAgdGhpcy50YXJnZXRNb2RpZmllciA9ICdzY3JvbGwtaGFuZGxlJztcbiAgICAgIH1cblxuICAgICAgWydlbGVtZW50JywgJ3RhcmdldCddLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAodHlwZW9mIF90aGlzMltrZXldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGV0aGVyIEVycm9yOiBCb3RoIGVsZW1lbnQgYW5kIHRhcmdldCBtdXN0IGJlIGRlZmluZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgX3RoaXMyW2tleV0uanF1ZXJ5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIF90aGlzMltrZXldID0gX3RoaXMyW2tleV1bMF07XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIF90aGlzMltrZXldID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIF90aGlzMltrZXldID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihfdGhpczJba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBhZGRDbGFzcyh0aGlzLmVsZW1lbnQsIHRoaXMuZ2V0Q2xhc3MoJ2VsZW1lbnQnKSk7XG4gICAgICBpZiAoISh0aGlzLm9wdGlvbnMuYWRkVGFyZ2V0Q2xhc3NlcyA9PT0gZmFsc2UpKSB7XG4gICAgICAgIGFkZENsYXNzKHRoaXMudGFyZ2V0LCB0aGlzLmdldENsYXNzKCd0YXJnZXQnKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5vcHRpb25zLmF0dGFjaG1lbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZXRoZXIgRXJyb3I6IFlvdSBtdXN0IHByb3ZpZGUgYW4gYXR0YWNobWVudCcpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRhcmdldEF0dGFjaG1lbnQgPSBwYXJzZUF0dGFjaG1lbnQodGhpcy5vcHRpb25zLnRhcmdldEF0dGFjaG1lbnQpO1xuICAgICAgdGhpcy5hdHRhY2htZW50ID0gcGFyc2VBdHRhY2htZW50KHRoaXMub3B0aW9ucy5hdHRhY2htZW50KTtcbiAgICAgIHRoaXMub2Zmc2V0ID0gcGFyc2VPZmZzZXQodGhpcy5vcHRpb25zLm9mZnNldCk7XG4gICAgICB0aGlzLnRhcmdldE9mZnNldCA9IHBhcnNlT2Zmc2V0KHRoaXMub3B0aW9ucy50YXJnZXRPZmZzZXQpO1xuXG4gICAgICBpZiAodHlwZW9mIHRoaXMuc2Nyb2xsUGFyZW50cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnRhcmdldE1vZGlmaWVyID09PSAnc2Nyb2xsLWhhbmRsZScpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxQYXJlbnRzID0gW3RoaXMudGFyZ2V0XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsUGFyZW50cyA9IGdldFNjcm9sbFBhcmVudHModGhpcy50YXJnZXQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoISh0aGlzLm9wdGlvbnMuZW5hYmxlZCA9PT0gZmFsc2UpKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlKHBvcyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZ2V0VGFyZ2V0Qm91bmRzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGFyZ2V0Qm91bmRzKCkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnRhcmdldE1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodGhpcy50YXJnZXRNb2RpZmllciA9PT0gJ3Zpc2libGUnKSB7XG4gICAgICAgICAgaWYgKHRoaXMudGFyZ2V0ID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgICAgICByZXR1cm4geyB0b3A6IHBhZ2VZT2Zmc2V0LCBsZWZ0OiBwYWdlWE9mZnNldCwgaGVpZ2h0OiBpbm5lckhlaWdodCwgd2lkdGg6IGlubmVyV2lkdGggfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGJvdW5kcyA9IGdldEJvdW5kcyh0aGlzLnRhcmdldCk7XG5cbiAgICAgICAgICAgIHZhciBvdXQgPSB7XG4gICAgICAgICAgICAgIGhlaWdodDogYm91bmRzLmhlaWdodCxcbiAgICAgICAgICAgICAgd2lkdGg6IGJvdW5kcy53aWR0aCxcbiAgICAgICAgICAgICAgdG9wOiBib3VuZHMudG9wLFxuICAgICAgICAgICAgICBsZWZ0OiBib3VuZHMubGVmdFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgb3V0LmhlaWdodCA9IE1hdGgubWluKG91dC5oZWlnaHQsIGJvdW5kcy5oZWlnaHQgLSAocGFnZVlPZmZzZXQgLSBib3VuZHMudG9wKSk7XG4gICAgICAgICAgICBvdXQuaGVpZ2h0ID0gTWF0aC5taW4ob3V0LmhlaWdodCwgYm91bmRzLmhlaWdodCAtIChib3VuZHMudG9wICsgYm91bmRzLmhlaWdodCAtIChwYWdlWU9mZnNldCArIGlubmVySGVpZ2h0KSkpO1xuICAgICAgICAgICAgb3V0LmhlaWdodCA9IE1hdGgubWluKGlubmVySGVpZ2h0LCBvdXQuaGVpZ2h0KTtcbiAgICAgICAgICAgIG91dC5oZWlnaHQgLT0gMjtcblxuICAgICAgICAgICAgb3V0LndpZHRoID0gTWF0aC5taW4ob3V0LndpZHRoLCBib3VuZHMud2lkdGggLSAocGFnZVhPZmZzZXQgLSBib3VuZHMubGVmdCkpO1xuICAgICAgICAgICAgb3V0LndpZHRoID0gTWF0aC5taW4ob3V0LndpZHRoLCBib3VuZHMud2lkdGggLSAoYm91bmRzLmxlZnQgKyBib3VuZHMud2lkdGggLSAocGFnZVhPZmZzZXQgKyBpbm5lcldpZHRoKSkpO1xuICAgICAgICAgICAgb3V0LndpZHRoID0gTWF0aC5taW4oaW5uZXJXaWR0aCwgb3V0LndpZHRoKTtcbiAgICAgICAgICAgIG91dC53aWR0aCAtPSAyO1xuXG4gICAgICAgICAgICBpZiAob3V0LnRvcCA8IHBhZ2VZT2Zmc2V0KSB7XG4gICAgICAgICAgICAgIG91dC50b3AgPSBwYWdlWU9mZnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvdXQubGVmdCA8IHBhZ2VYT2Zmc2V0KSB7XG4gICAgICAgICAgICAgIG91dC5sZWZ0ID0gcGFnZVhPZmZzZXQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGFyZ2V0TW9kaWZpZXIgPT09ICdzY3JvbGwtaGFuZGxlJykge1xuICAgICAgICAgIHZhciBib3VuZHMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMudGFyZ2V0O1xuICAgICAgICAgIGlmICh0YXJnZXQgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgIHRhcmdldCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuICAgICAgICAgICAgYm91bmRzID0ge1xuICAgICAgICAgICAgICBsZWZ0OiBwYWdlWE9mZnNldCxcbiAgICAgICAgICAgICAgdG9wOiBwYWdlWU9mZnNldCxcbiAgICAgICAgICAgICAgaGVpZ2h0OiBpbm5lckhlaWdodCxcbiAgICAgICAgICAgICAgd2lkdGg6IGlubmVyV2lkdGhcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJvdW5kcyA9IGdldEJvdW5kcyh0YXJnZXQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodGFyZ2V0KTtcblxuICAgICAgICAgIHZhciBoYXNCb3R0b21TY3JvbGwgPSB0YXJnZXQuc2Nyb2xsV2lkdGggPiB0YXJnZXQuY2xpZW50V2lkdGggfHwgW3N0eWxlLm92ZXJmbG93LCBzdHlsZS5vdmVyZmxvd1hdLmluZGV4T2YoJ3Njcm9sbCcpID49IDAgfHwgdGhpcy50YXJnZXQgIT09IGRvY3VtZW50LmJvZHk7XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsQm90dG9tID0gMDtcbiAgICAgICAgICBpZiAoaGFzQm90dG9tU2Nyb2xsKSB7XG4gICAgICAgICAgICBzY3JvbGxCb3R0b20gPSAxNTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgaGVpZ2h0ID0gYm91bmRzLmhlaWdodCAtIHBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyVG9wV2lkdGgpIC0gcGFyc2VGbG9hdChzdHlsZS5ib3JkZXJCb3R0b21XaWR0aCkgLSBzY3JvbGxCb3R0b207XG5cbiAgICAgICAgICB2YXIgb3V0ID0ge1xuICAgICAgICAgICAgd2lkdGg6IDE1LFxuICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQgKiAwLjk3NSAqIChoZWlnaHQgLyB0YXJnZXQuc2Nyb2xsSGVpZ2h0KSxcbiAgICAgICAgICAgIGxlZnQ6IGJvdW5kcy5sZWZ0ICsgYm91bmRzLndpZHRoIC0gcGFyc2VGbG9hdChzdHlsZS5ib3JkZXJMZWZ0V2lkdGgpIC0gMTVcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIGZpdEFkaiA9IDA7XG4gICAgICAgICAgaWYgKGhlaWdodCA8IDQwOCAmJiB0aGlzLnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICAgICAgZml0QWRqID0gLTAuMDAwMTEgKiBNYXRoLnBvdyhoZWlnaHQsIDIpIC0gMC4wMDcyNyAqIGhlaWdodCArIDIyLjU4O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLnRhcmdldCAhPT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICAgICAgb3V0LmhlaWdodCA9IE1hdGgubWF4KG91dC5oZWlnaHQsIDI0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsUGVyY2VudGFnZSA9IHRoaXMudGFyZ2V0LnNjcm9sbFRvcCAvICh0YXJnZXQuc2Nyb2xsSGVpZ2h0IC0gaGVpZ2h0KTtcbiAgICAgICAgICBvdXQudG9wID0gc2Nyb2xsUGVyY2VudGFnZSAqIChoZWlnaHQgLSBvdXQuaGVpZ2h0IC0gZml0QWRqKSArIGJvdW5kcy50b3AgKyBwYXJzZUZsb2F0KHN0eWxlLmJvcmRlclRvcFdpZHRoKTtcblxuICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICAgICAgb3V0LmhlaWdodCA9IE1hdGgubWF4KG91dC5oZWlnaHQsIDI0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZ2V0Qm91bmRzKHRoaXMudGFyZ2V0KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjbGVhckNhY2hlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJDYWNoZSgpIHtcbiAgICAgIHRoaXMuX2NhY2hlID0ge307XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY2FjaGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjYWNoZShrLCBnZXR0ZXIpIHtcbiAgICAgIC8vIE1vcmUgdGhhbiBvbmUgbW9kdWxlIHdpbGwgb2Z0ZW4gbmVlZCB0aGUgc2FtZSBET00gaW5mbywgc29cbiAgICAgIC8vIHdlIGtlZXAgYSBjYWNoZSB3aGljaCBpcyBjbGVhcmVkIG9uIGVhY2ggcG9zaXRpb24gY2FsbFxuICAgICAgaWYgKHR5cGVvZiB0aGlzLl9jYWNoZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5fY2FjaGUgPSB7fTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLl9jYWNoZVtrXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5fY2FjaGVba10gPSBnZXR0ZXIuY2FsbCh0aGlzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlW2tdO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2VuYWJsZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB2YXIgcG9zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGFyZ3VtZW50c1swXTtcblxuICAgICAgaWYgKCEodGhpcy5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuICAgICAgICBhZGRDbGFzcyh0aGlzLnRhcmdldCwgdGhpcy5nZXRDbGFzcygnZW5hYmxlZCcpKTtcbiAgICAgIH1cbiAgICAgIGFkZENsYXNzKHRoaXMuZWxlbWVudCwgdGhpcy5nZXRDbGFzcygnZW5hYmxlZCcpKTtcbiAgICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XG5cbiAgICAgIHRoaXMuc2Nyb2xsUGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgICAgaWYgKHBhcmVudCAhPT0gX3RoaXMzLnRhcmdldC5vd25lckRvY3VtZW50KSB7XG4gICAgICAgICAgcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIF90aGlzMy5wb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAocG9zKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24oKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdkaXNhYmxlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICByZW1vdmVDbGFzcyh0aGlzLnRhcmdldCwgdGhpcy5nZXRDbGFzcygnZW5hYmxlZCcpKTtcbiAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWxlbWVudCwgdGhpcy5nZXRDbGFzcygnZW5hYmxlZCcpKTtcbiAgICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgICBpZiAodHlwZW9mIHRoaXMuc2Nyb2xsUGFyZW50cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxQYXJlbnRzLmZvckVhY2goZnVuY3Rpb24gKHBhcmVudCkge1xuICAgICAgICAgIHBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBfdGhpczQucG9zaXRpb24pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdkZXN0cm95JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICB0aGlzLmRpc2FibGUoKTtcblxuICAgICAgdGV0aGVycy5mb3JFYWNoKGZ1bmN0aW9uICh0ZXRoZXIsIGkpIHtcbiAgICAgICAgaWYgKHRldGhlciA9PT0gX3RoaXM1KSB7XG4gICAgICAgICAgdGV0aGVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBSZW1vdmUgYW55IGVsZW1lbnRzIHdlIHdlcmUgdXNpbmcgZm9yIGNvbnZlbmllbmNlIGZyb20gdGhlIERPTVxuICAgICAgaWYgKHRldGhlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJlbW92ZVV0aWxFbGVtZW50cygpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3VwZGF0ZUF0dGFjaENsYXNzZXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVBdHRhY2hDbGFzc2VzKGVsZW1lbnRBdHRhY2gsIHRhcmdldEF0dGFjaCkge1xuICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgIGVsZW1lbnRBdHRhY2ggPSBlbGVtZW50QXR0YWNoIHx8IHRoaXMuYXR0YWNobWVudDtcbiAgICAgIHRhcmdldEF0dGFjaCA9IHRhcmdldEF0dGFjaCB8fCB0aGlzLnRhcmdldEF0dGFjaG1lbnQ7XG4gICAgICB2YXIgc2lkZXMgPSBbJ2xlZnQnLCAndG9wJywgJ2JvdHRvbScsICdyaWdodCcsICdtaWRkbGUnLCAnY2VudGVyJ107XG5cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5fYWRkQXR0YWNoQ2xhc3NlcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5fYWRkQXR0YWNoQ2xhc3Nlcy5sZW5ndGgpIHtcbiAgICAgICAgLy8gdXBkYXRlQXR0YWNoQ2xhc3NlcyBjYW4gYmUgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIGluIGEgcG9zaXRpb24gY2FsbCwgc29cbiAgICAgICAgLy8gd2UgbmVlZCB0byBjbGVhbiB1cCBhZnRlciBvdXJzZWx2ZXMgc3VjaCB0aGF0IHdoZW4gdGhlIGxhc3QgZGVmZXIgZ2V0c1xuICAgICAgICAvLyByYW4gaXQgZG9lc24ndCBhZGQgYW55IGV4dHJhIGNsYXNzZXMgZnJvbSBwcmV2aW91cyBjYWxscy5cbiAgICAgICAgdGhpcy5fYWRkQXR0YWNoQ2xhc3Nlcy5zcGxpY2UoMCwgdGhpcy5fYWRkQXR0YWNoQ2xhc3Nlcy5sZW5ndGgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuX2FkZEF0dGFjaENsYXNzZXMgPSBbXTtcbiAgICAgIH1cbiAgICAgIHZhciBhZGQgPSB0aGlzLl9hZGRBdHRhY2hDbGFzc2VzO1xuXG4gICAgICBpZiAoZWxlbWVudEF0dGFjaC50b3ApIHtcbiAgICAgICAgYWRkLnB1c2godGhpcy5nZXRDbGFzcygnZWxlbWVudC1hdHRhY2hlZCcpICsgJy0nICsgZWxlbWVudEF0dGFjaC50b3ApO1xuICAgICAgfVxuICAgICAgaWYgKGVsZW1lbnRBdHRhY2gubGVmdCkge1xuICAgICAgICBhZGQucHVzaCh0aGlzLmdldENsYXNzKCdlbGVtZW50LWF0dGFjaGVkJykgKyAnLScgKyBlbGVtZW50QXR0YWNoLmxlZnQpO1xuICAgICAgfVxuICAgICAgaWYgKHRhcmdldEF0dGFjaC50b3ApIHtcbiAgICAgICAgYWRkLnB1c2godGhpcy5nZXRDbGFzcygndGFyZ2V0LWF0dGFjaGVkJykgKyAnLScgKyB0YXJnZXRBdHRhY2gudG9wKTtcbiAgICAgIH1cbiAgICAgIGlmICh0YXJnZXRBdHRhY2gubGVmdCkge1xuICAgICAgICBhZGQucHVzaCh0aGlzLmdldENsYXNzKCd0YXJnZXQtYXR0YWNoZWQnKSArICctJyArIHRhcmdldEF0dGFjaC5sZWZ0KTtcbiAgICAgIH1cblxuICAgICAgdmFyIGFsbCA9IFtdO1xuICAgICAgc2lkZXMuZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgICBhbGwucHVzaChfdGhpczYuZ2V0Q2xhc3MoJ2VsZW1lbnQtYXR0YWNoZWQnKSArICctJyArIHNpZGUpO1xuICAgICAgICBhbGwucHVzaChfdGhpczYuZ2V0Q2xhc3MoJ3RhcmdldC1hdHRhY2hlZCcpICsgJy0nICsgc2lkZSk7XG4gICAgICB9KTtcblxuICAgICAgZGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISh0eXBlb2YgX3RoaXM2Ll9hZGRBdHRhY2hDbGFzc2VzICE9PSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGVDbGFzc2VzKF90aGlzNi5lbGVtZW50LCBfdGhpczYuX2FkZEF0dGFjaENsYXNzZXMsIGFsbCk7XG4gICAgICAgIGlmICghKF90aGlzNi5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuICAgICAgICAgIHVwZGF0ZUNsYXNzZXMoX3RoaXM2LnRhcmdldCwgX3RoaXM2Ll9hZGRBdHRhY2hDbGFzc2VzLCBhbGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlIF90aGlzNi5fYWRkQXR0YWNoQ2xhc3NlcztcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3Bvc2l0aW9uJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcG9zaXRpb24oKSB7XG4gICAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgICAgdmFyIGZsdXNoQ2hhbmdlcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmd1bWVudHNbMF07XG5cbiAgICAgIC8vIGZsdXNoQ2hhbmdlcyBjb21taXRzIHRoZSBjaGFuZ2VzIGltbWVkaWF0ZWx5LCBsZWF2ZSB0cnVlIHVubGVzcyB5b3UgYXJlIHBvc2l0aW9uaW5nIG11bHRpcGxlXG4gICAgICAvLyB0ZXRoZXJzIChpbiB3aGljaCBjYXNlIGNhbGwgVGV0aGVyLlV0aWxzLmZsdXNoIHlvdXJzZWxmIHdoZW4geW91J3JlIGRvbmUpXG5cbiAgICAgIGlmICghdGhpcy5lbmFibGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jbGVhckNhY2hlKCk7XG5cbiAgICAgIC8vIFR1cm4gJ2F1dG8nIGF0dGFjaG1lbnRzIGludG8gdGhlIGFwcHJvcHJpYXRlIGNvcm5lciBvciBlZGdlXG4gICAgICB2YXIgdGFyZ2V0QXR0YWNobWVudCA9IGF1dG9Ub0ZpeGVkQXR0YWNobWVudCh0aGlzLnRhcmdldEF0dGFjaG1lbnQsIHRoaXMuYXR0YWNobWVudCk7XG5cbiAgICAgIHRoaXMudXBkYXRlQXR0YWNoQ2xhc3Nlcyh0aGlzLmF0dGFjaG1lbnQsIHRhcmdldEF0dGFjaG1lbnQpO1xuXG4gICAgICB2YXIgZWxlbWVudFBvcyA9IHRoaXMuY2FjaGUoJ2VsZW1lbnQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZ2V0Qm91bmRzKF90aGlzNy5lbGVtZW50KTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgd2lkdGggPSBlbGVtZW50UG9zLndpZHRoO1xuICAgICAgdmFyIGhlaWdodCA9IGVsZW1lbnRQb3MuaGVpZ2h0O1xuXG4gICAgICBpZiAod2lkdGggPT09IDAgJiYgaGVpZ2h0ID09PSAwICYmIHR5cGVvZiB0aGlzLmxhc3RTaXplICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YXIgX2xhc3RTaXplID0gdGhpcy5sYXN0U2l6ZTtcblxuICAgICAgICAvLyBXZSBjYWNoZSB0aGUgaGVpZ2h0IGFuZCB3aWR0aCB0byBtYWtlIGl0IHBvc3NpYmxlIHRvIHBvc2l0aW9uIGVsZW1lbnRzIHRoYXQgYXJlXG4gICAgICAgIC8vIGdldHRpbmcgaGlkZGVuLlxuICAgICAgICB3aWR0aCA9IF9sYXN0U2l6ZS53aWR0aDtcbiAgICAgICAgaGVpZ2h0ID0gX2xhc3RTaXplLmhlaWdodDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubGFzdFNpemUgPSB7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRhcmdldFBvcyA9IHRoaXMuY2FjaGUoJ3RhcmdldC1ib3VuZHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczcuZ2V0VGFyZ2V0Qm91bmRzKCk7XG4gICAgICB9KTtcbiAgICAgIHZhciB0YXJnZXRTaXplID0gdGFyZ2V0UG9zO1xuXG4gICAgICAvLyBHZXQgYW4gYWN0dWFsIHB4IG9mZnNldCBmcm9tIHRoZSBhdHRhY2htZW50XG4gICAgICB2YXIgb2Zmc2V0ID0gb2Zmc2V0VG9QeChhdHRhY2htZW50VG9PZmZzZXQodGhpcy5hdHRhY2htZW50KSwgeyB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH0pO1xuICAgICAgdmFyIHRhcmdldE9mZnNldCA9IG9mZnNldFRvUHgoYXR0YWNobWVudFRvT2Zmc2V0KHRhcmdldEF0dGFjaG1lbnQpLCB0YXJnZXRTaXplKTtcblxuICAgICAgdmFyIG1hbnVhbE9mZnNldCA9IG9mZnNldFRvUHgodGhpcy5vZmZzZXQsIHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9KTtcbiAgICAgIHZhciBtYW51YWxUYXJnZXRPZmZzZXQgPSBvZmZzZXRUb1B4KHRoaXMudGFyZ2V0T2Zmc2V0LCB0YXJnZXRTaXplKTtcblxuICAgICAgLy8gQWRkIHRoZSBtYW51YWxseSBwcm92aWRlZCBvZmZzZXRcbiAgICAgIG9mZnNldCA9IGFkZE9mZnNldChvZmZzZXQsIG1hbnVhbE9mZnNldCk7XG4gICAgICB0YXJnZXRPZmZzZXQgPSBhZGRPZmZzZXQodGFyZ2V0T2Zmc2V0LCBtYW51YWxUYXJnZXRPZmZzZXQpO1xuXG4gICAgICAvLyBJdCdzIG5vdyBvdXIgZ29hbCB0byBtYWtlIChlbGVtZW50IHBvc2l0aW9uICsgb2Zmc2V0KSA9PSAodGFyZ2V0IHBvc2l0aW9uICsgdGFyZ2V0IG9mZnNldClcbiAgICAgIHZhciBsZWZ0ID0gdGFyZ2V0UG9zLmxlZnQgKyB0YXJnZXRPZmZzZXQubGVmdCAtIG9mZnNldC5sZWZ0O1xuICAgICAgdmFyIHRvcCA9IHRhcmdldFBvcy50b3AgKyB0YXJnZXRPZmZzZXQudG9wIC0gb2Zmc2V0LnRvcDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBUZXRoZXJCYXNlLm1vZHVsZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIF9tb2R1bGUyID0gVGV0aGVyQmFzZS5tb2R1bGVzW2ldO1xuICAgICAgICB2YXIgcmV0ID0gX21vZHVsZTIucG9zaXRpb24uY2FsbCh0aGlzLCB7XG4gICAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgICB0b3A6IHRvcCxcbiAgICAgICAgICB0YXJnZXRBdHRhY2htZW50OiB0YXJnZXRBdHRhY2htZW50LFxuICAgICAgICAgIHRhcmdldFBvczogdGFyZ2V0UG9zLFxuICAgICAgICAgIGVsZW1lbnRQb3M6IGVsZW1lbnRQb3MsXG4gICAgICAgICAgb2Zmc2V0OiBvZmZzZXQsXG4gICAgICAgICAgdGFyZ2V0T2Zmc2V0OiB0YXJnZXRPZmZzZXQsXG4gICAgICAgICAgbWFudWFsT2Zmc2V0OiBtYW51YWxPZmZzZXQsXG4gICAgICAgICAgbWFudWFsVGFyZ2V0T2Zmc2V0OiBtYW51YWxUYXJnZXRPZmZzZXQsXG4gICAgICAgICAgc2Nyb2xsYmFyU2l6ZTogc2Nyb2xsYmFyU2l6ZSxcbiAgICAgICAgICBhdHRhY2htZW50OiB0aGlzLmF0dGFjaG1lbnRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJldCA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHJldCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b3AgPSByZXQudG9wO1xuICAgICAgICAgIGxlZnQgPSByZXQubGVmdDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBXZSBkZXNjcmliZSB0aGUgcG9zaXRpb24gdGhyZWUgZGlmZmVyZW50IHdheXMgdG8gZ2l2ZSB0aGUgb3B0aW1pemVyXG4gICAgICAvLyBhIGNoYW5jZSB0byBkZWNpZGUgdGhlIGJlc3QgcG9zc2libGUgd2F5IHRvIHBvc2l0aW9uIHRoZSBlbGVtZW50XG4gICAgICAvLyB3aXRoIHRoZSBmZXdlc3QgcmVwYWludHMuXG4gICAgICB2YXIgbmV4dCA9IHtcbiAgICAgICAgLy8gSXQncyBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgcGFnZSAoYWJzb2x1dGUgcG9zaXRpb25pbmcgd2hlblxuICAgICAgICAvLyB0aGUgZWxlbWVudCBpcyBhIGNoaWxkIG9mIHRoZSBib2R5KVxuICAgICAgICBwYWdlOiB7XG4gICAgICAgICAgdG9wOiB0b3AsXG4gICAgICAgICAgbGVmdDogbGVmdFxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIEl0J3MgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0IChmaXhlZCBwb3NpdGlvbmluZylcbiAgICAgICAgdmlld3BvcnQ6IHtcbiAgICAgICAgICB0b3A6IHRvcCAtIHBhZ2VZT2Zmc2V0LFxuICAgICAgICAgIGJvdHRvbTogcGFnZVlPZmZzZXQgLSB0b3AgLSBoZWlnaHQgKyBpbm5lckhlaWdodCxcbiAgICAgICAgICBsZWZ0OiBsZWZ0IC0gcGFnZVhPZmZzZXQsXG4gICAgICAgICAgcmlnaHQ6IHBhZ2VYT2Zmc2V0IC0gbGVmdCAtIHdpZHRoICsgaW5uZXJXaWR0aFxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgZG9jID0gdGhpcy50YXJnZXQub3duZXJEb2N1bWVudDtcbiAgICAgIHZhciB3aW4gPSBkb2MuZGVmYXVsdFZpZXc7XG5cbiAgICAgIHZhciBzY3JvbGxiYXJTaXplID0gdW5kZWZpbmVkO1xuICAgICAgaWYgKHdpbi5pbm5lckhlaWdodCA+IGRvYy5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgIHNjcm9sbGJhclNpemUgPSB0aGlzLmNhY2hlKCdzY3JvbGxiYXItc2l6ZScsIGdldFNjcm9sbEJhclNpemUpO1xuICAgICAgICBuZXh0LnZpZXdwb3J0LmJvdHRvbSAtPSBzY3JvbGxiYXJTaXplLmhlaWdodDtcbiAgICAgIH1cblxuICAgICAgaWYgKHdpbi5pbm5lcldpZHRoID4gZG9jLmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCkge1xuICAgICAgICBzY3JvbGxiYXJTaXplID0gdGhpcy5jYWNoZSgnc2Nyb2xsYmFyLXNpemUnLCBnZXRTY3JvbGxCYXJTaXplKTtcbiAgICAgICAgbmV4dC52aWV3cG9ydC5yaWdodCAtPSBzY3JvbGxiYXJTaXplLndpZHRoO1xuICAgICAgfVxuXG4gICAgICBpZiAoWycnLCAnc3RhdGljJ10uaW5kZXhPZihkb2MuYm9keS5zdHlsZS5wb3NpdGlvbikgPT09IC0xIHx8IFsnJywgJ3N0YXRpYyddLmluZGV4T2YoZG9jLmJvZHkucGFyZW50RWxlbWVudC5zdHlsZS5wb3NpdGlvbikgPT09IC0xKSB7XG4gICAgICAgIC8vIEFic29sdXRlIHBvc2l0aW9uaW5nIGluIHRoZSBib2R5IHdpbGwgYmUgcmVsYXRpdmUgdG8gdGhlIHBhZ2UsIG5vdCB0aGUgJ2luaXRpYWwgY29udGFpbmluZyBibG9jaydcbiAgICAgICAgbmV4dC5wYWdlLmJvdHRvbSA9IGRvYy5ib2R5LnNjcm9sbEhlaWdodCAtIHRvcCAtIGhlaWdodDtcbiAgICAgICAgbmV4dC5wYWdlLnJpZ2h0ID0gZG9jLmJvZHkuc2Nyb2xsV2lkdGggLSBsZWZ0IC0gd2lkdGg7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9wdGltaXphdGlvbnMgIT09ICd1bmRlZmluZWQnICYmIHRoaXMub3B0aW9ucy5vcHRpbWl6YXRpb25zLm1vdmVFbGVtZW50ICE9PSBmYWxzZSAmJiAhKHR5cGVvZiB0aGlzLnRhcmdldE1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50ID0gX3RoaXM3LmNhY2hlKCd0YXJnZXQtb2Zmc2V0cGFyZW50JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldE9mZnNldFBhcmVudChfdGhpczcudGFyZ2V0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgb2Zmc2V0UG9zaXRpb24gPSBfdGhpczcuY2FjaGUoJ3RhcmdldC1vZmZzZXRwYXJlbnQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldEJvdW5kcyhvZmZzZXRQYXJlbnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBvZmZzZXRQYXJlbnRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUob2Zmc2V0UGFyZW50KTtcbiAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50U2l6ZSA9IG9mZnNldFBvc2l0aW9uO1xuXG4gICAgICAgICAgdmFyIG9mZnNldEJvcmRlciA9IHt9O1xuICAgICAgICAgIFsnVG9wJywgJ0xlZnQnLCAnQm90dG9tJywgJ1JpZ2h0J10uZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgICAgICAgb2Zmc2V0Qm9yZGVyW3NpZGUudG9Mb3dlckNhc2UoKV0gPSBwYXJzZUZsb2F0KG9mZnNldFBhcmVudFN0eWxlWydib3JkZXInICsgc2lkZSArICdXaWR0aCddKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIG9mZnNldFBvc2l0aW9uLnJpZ2h0ID0gZG9jLmJvZHkuc2Nyb2xsV2lkdGggLSBvZmZzZXRQb3NpdGlvbi5sZWZ0IC0gb2Zmc2V0UGFyZW50U2l6ZS53aWR0aCArIG9mZnNldEJvcmRlci5yaWdodDtcbiAgICAgICAgICBvZmZzZXRQb3NpdGlvbi5ib3R0b20gPSBkb2MuYm9keS5zY3JvbGxIZWlnaHQgLSBvZmZzZXRQb3NpdGlvbi50b3AgLSBvZmZzZXRQYXJlbnRTaXplLmhlaWdodCArIG9mZnNldEJvcmRlci5ib3R0b207XG5cbiAgICAgICAgICBpZiAobmV4dC5wYWdlLnRvcCA+PSBvZmZzZXRQb3NpdGlvbi50b3AgKyBvZmZzZXRCb3JkZXIudG9wICYmIG5leHQucGFnZS5ib3R0b20gPj0gb2Zmc2V0UG9zaXRpb24uYm90dG9tKSB7XG4gICAgICAgICAgICBpZiAobmV4dC5wYWdlLmxlZnQgPj0gb2Zmc2V0UG9zaXRpb24ubGVmdCArIG9mZnNldEJvcmRlci5sZWZ0ICYmIG5leHQucGFnZS5yaWdodCA+PSBvZmZzZXRQb3NpdGlvbi5yaWdodCkge1xuICAgICAgICAgICAgICAvLyBXZSdyZSB3aXRoaW4gdGhlIHZpc2libGUgcGFydCBvZiB0aGUgdGFyZ2V0J3Mgc2Nyb2xsIHBhcmVudFxuICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gb2Zmc2V0UGFyZW50LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgdmFyIHNjcm9sbExlZnQgPSBvZmZzZXRQYXJlbnQuc2Nyb2xsTGVmdDtcblxuICAgICAgICAgICAgICAvLyBJdCdzIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSB0YXJnZXQncyBvZmZzZXQgcGFyZW50IChhYnNvbHV0ZSBwb3NpdGlvbmluZyB3aGVuXG4gICAgICAgICAgICAgIC8vIHRoZSBlbGVtZW50IGlzIG1vdmVkIHRvIGJlIGEgY2hpbGQgb2YgdGhlIHRhcmdldCdzIG9mZnNldCBwYXJlbnQpLlxuICAgICAgICAgICAgICBuZXh0Lm9mZnNldCA9IHtcbiAgICAgICAgICAgICAgICB0b3A6IG5leHQucGFnZS50b3AgLSBvZmZzZXRQb3NpdGlvbi50b3AgKyBzY3JvbGxUb3AgLSBvZmZzZXRCb3JkZXIudG9wLFxuICAgICAgICAgICAgICAgIGxlZnQ6IG5leHQucGFnZS5sZWZ0IC0gb2Zmc2V0UG9zaXRpb24ubGVmdCArIHNjcm9sbExlZnQgLSBvZmZzZXRCb3JkZXIubGVmdFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkoKTtcbiAgICAgIH1cblxuICAgICAgLy8gV2UgY291bGQgYWxzbyB0cmF2ZWwgdXAgdGhlIERPTSBhbmQgdHJ5IGVhY2ggY29udGFpbmluZyBjb250ZXh0LCByYXRoZXIgdGhhbiBvbmx5XG4gICAgICAvLyBsb29raW5nIGF0IHRoZSBib2R5LCBidXQgd2UncmUgZ29ubmEgZ2V0IGRpbWluaXNoaW5nIHJldHVybnMuXG5cbiAgICAgIHRoaXMubW92ZShuZXh0KTtcblxuICAgICAgdGhpcy5oaXN0b3J5LnVuc2hpZnQobmV4dCk7XG5cbiAgICAgIGlmICh0aGlzLmhpc3RvcnkubGVuZ3RoID4gMykge1xuICAgICAgICB0aGlzLmhpc3RvcnkucG9wKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmbHVzaENoYW5nZXMpIHtcbiAgICAgICAgZmx1c2goKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gVEhFIElTU1VFXG4gIH0sIHtcbiAgICBrZXk6ICdtb3ZlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZShwb3MpIHtcbiAgICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgICBpZiAoISh0eXBlb2YgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUgIT09ICd1bmRlZmluZWQnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBzYW1lID0ge307XG5cbiAgICAgIGZvciAodmFyIHR5cGUgaW4gcG9zKSB7XG4gICAgICAgIHNhbWVbdHlwZV0gPSB7fTtcblxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcG9zW3R5cGVdKSB7XG4gICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaGlzdG9yeS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIHBvaW50ID0gdGhpcy5oaXN0b3J5W2ldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwb2ludFt0eXBlXSAhPT0gJ3VuZGVmaW5lZCcgJiYgIXdpdGhpbihwb2ludFt0eXBlXVtrZXldLCBwb3NbdHlwZV1ba2V5XSkpIHtcbiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICBzYW1lW3R5cGVdW2tleV0gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgY3NzID0geyB0b3A6ICcnLCBsZWZ0OiAnJywgcmlnaHQ6ICcnLCBib3R0b206ICcnIH07XG5cbiAgICAgIHZhciB0cmFuc2NyaWJlID0gZnVuY3Rpb24gdHJhbnNjcmliZShfc2FtZSwgX3Bvcykge1xuICAgICAgICB2YXIgaGFzT3B0aW1pemF0aW9ucyA9IHR5cGVvZiBfdGhpczgub3B0aW9ucy5vcHRpbWl6YXRpb25zICE9PSAndW5kZWZpbmVkJztcbiAgICAgICAgdmFyIGdwdSA9IGhhc09wdGltaXphdGlvbnMgPyBfdGhpczgub3B0aW9ucy5vcHRpbWl6YXRpb25zLmdwdSA6IG51bGw7XG4gICAgICAgIGlmIChncHUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgdmFyIHlQb3MgPSB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIHhQb3MgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKF9zYW1lLnRvcCkge1xuICAgICAgICAgICAgY3NzLnRvcCA9IDA7XG4gICAgICAgICAgICB5UG9zID0gX3Bvcy50b3A7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNzcy5ib3R0b20gPSAwO1xuICAgICAgICAgICAgeVBvcyA9IC1fcG9zLmJvdHRvbTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoX3NhbWUubGVmdCkge1xuICAgICAgICAgICAgY3NzLmxlZnQgPSAwO1xuICAgICAgICAgICAgeFBvcyA9IF9wb3MubGVmdDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3NzLnJpZ2h0ID0gMDtcbiAgICAgICAgICAgIHhQb3MgPSAtX3Bvcy5yaWdodDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEpIHtcbiAgICAgICAgICAgIC8vIEh1YlNwb3QvdGV0aGVyIzIwN1xuICAgICAgICAgICAgdmFyIHJldGluYSA9IHdpbmRvdy5tYXRjaE1lZGlhKCdvbmx5IHNjcmVlbiBhbmQgKG1pbi1yZXNvbHV0aW9uOiAxLjNkcHB4KScpLm1hdGNoZXMgfHwgd2luZG93Lm1hdGNoTWVkaWEoJ29ubHkgc2NyZWVuIGFuZCAoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAxLjMpJykubWF0Y2hlcztcbiAgICAgICAgICAgIGlmICghcmV0aW5hKSB7XG4gICAgICAgICAgICAgIHhQb3MgPSBNYXRoLnJvdW5kKHhQb3MpO1xuICAgICAgICAgICAgICB5UG9zID0gTWF0aC5yb3VuZCh5UG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjc3NbdHJhbnNmb3JtS2V5XSA9ICd0cmFuc2xhdGVYKCcgKyB4UG9zICsgJ3B4KSB0cmFuc2xhdGVZKCcgKyB5UG9zICsgJ3B4KSc7XG5cbiAgICAgICAgICBpZiAodHJhbnNmb3JtS2V5ICE9PSAnbXNUcmFuc2Zvcm0nKSB7XG4gICAgICAgICAgICAvLyBUaGUgWiB0cmFuc2Zvcm0gd2lsbCBrZWVwIHRoaXMgaW4gdGhlIEdQVSAoZmFzdGVyLCBhbmQgcHJldmVudHMgYXJ0aWZhY3RzKSxcbiAgICAgICAgICAgIC8vIGJ1dCBJRTkgZG9lc24ndCBzdXBwb3J0IDNkIHRyYW5zZm9ybXMgYW5kIHdpbGwgY2hva2UuXG4gICAgICAgICAgICBjc3NbdHJhbnNmb3JtS2V5XSArPSBcIiB0cmFuc2xhdGVaKDApXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChfc2FtZS50b3ApIHtcbiAgICAgICAgICAgIGNzcy50b3AgPSBfcG9zLnRvcCArICdweCc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNzcy5ib3R0b20gPSBfcG9zLmJvdHRvbSArICdweCc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKF9zYW1lLmxlZnQpIHtcbiAgICAgICAgICAgIGNzcy5sZWZ0ID0gX3Bvcy5sZWZ0ICsgJ3B4JztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3NzLnJpZ2h0ID0gX3Bvcy5yaWdodCArICdweCc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgbW92ZWQgPSBmYWxzZTtcbiAgICAgIGlmICgoc2FtZS5wYWdlLnRvcCB8fCBzYW1lLnBhZ2UuYm90dG9tKSAmJiAoc2FtZS5wYWdlLmxlZnQgfHwgc2FtZS5wYWdlLnJpZ2h0KSkge1xuICAgICAgICBjc3MucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICB0cmFuc2NyaWJlKHNhbWUucGFnZSwgcG9zLnBhZ2UpO1xuICAgICAgfSBlbHNlIGlmICgoc2FtZS52aWV3cG9ydC50b3AgfHwgc2FtZS52aWV3cG9ydC5ib3R0b20pICYmIChzYW1lLnZpZXdwb3J0LmxlZnQgfHwgc2FtZS52aWV3cG9ydC5yaWdodCkpIHtcbiAgICAgICAgY3NzLnBvc2l0aW9uID0gJ2ZpeGVkJztcbiAgICAgICAgdHJhbnNjcmliZShzYW1lLnZpZXdwb3J0LCBwb3Mudmlld3BvcnQpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2FtZS5vZmZzZXQgIT09ICd1bmRlZmluZWQnICYmIHNhbWUub2Zmc2V0LnRvcCAmJiBzYW1lLm9mZnNldC5sZWZ0KSB7XG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY3NzLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50ID0gX3RoaXM4LmNhY2hlKCd0YXJnZXQtb2Zmc2V0cGFyZW50JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldE9mZnNldFBhcmVudChfdGhpczgudGFyZ2V0KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChnZXRPZmZzZXRQYXJlbnQoX3RoaXM4LmVsZW1lbnQpICE9PSBvZmZzZXRQYXJlbnQpIHtcbiAgICAgICAgICAgIGRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgX3RoaXM4LmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChfdGhpczguZWxlbWVudCk7XG4gICAgICAgICAgICAgIG9mZnNldFBhcmVudC5hcHBlbmRDaGlsZChfdGhpczguZWxlbWVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0cmFuc2NyaWJlKHNhbWUub2Zmc2V0LCBwb3Mub2Zmc2V0KTtcbiAgICAgICAgICBtb3ZlZCA9IHRydWU7XG4gICAgICAgIH0pKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjc3MucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICB0cmFuc2NyaWJlKHsgdG9wOiB0cnVlLCBsZWZ0OiB0cnVlIH0sIHBvcy5wYWdlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFtb3ZlZCkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmJvZHlFbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLmJvZHlFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIG9mZnNldFBhcmVudElzQm9keSA9IHRydWU7XG4gICAgICAgICAgdmFyIGN1cnJlbnROb2RlID0gdGhpcy5lbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICAgICAgd2hpbGUgKGN1cnJlbnROb2RlICYmIGN1cnJlbnROb2RlLm5vZGVUeXBlID09PSAxICYmIGN1cnJlbnROb2RlLnRhZ05hbWUgIT09ICdCT0RZJykge1xuICAgICAgICAgICAgaWYgKGdldENvbXB1dGVkU3R5bGUoY3VycmVudE5vZGUpLnBvc2l0aW9uICE9PSAnc3RhdGljJykge1xuICAgICAgICAgICAgICBvZmZzZXRQYXJlbnRJc0JvZHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIW9mZnNldFBhcmVudElzQm9keSkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQW55IGNzcyBjaGFuZ2Ugd2lsbCB0cmlnZ2VyIGEgcmVwYWludCwgc28gbGV0J3MgYXZvaWQgb25lIGlmIG5vdGhpbmcgY2hhbmdlZFxuICAgICAgdmFyIHdyaXRlQ1NTID0ge307XG4gICAgICB2YXIgd3JpdGUgPSBmYWxzZTtcbiAgICAgIGZvciAodmFyIGtleSBpbiBjc3MpIHtcbiAgICAgICAgdmFyIHZhbCA9IGNzc1trZXldO1xuICAgICAgICB2YXIgZWxWYWwgPSB0aGlzLmVsZW1lbnQuc3R5bGVba2V5XTtcblxuICAgICAgICBpZiAoZWxWYWwgIT09IHZhbCkge1xuICAgICAgICAgIHdyaXRlID0gdHJ1ZTtcbiAgICAgICAgICB3cml0ZUNTU1trZXldID0gdmFsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh3cml0ZSkge1xuICAgICAgICBkZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZXh0ZW5kKF90aGlzOC5lbGVtZW50LnN0eWxlLCB3cml0ZUNTUyk7XG4gICAgICAgICAgX3RoaXM4LnRyaWdnZXIoJ3JlcG9zaXRpb25lZCcpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gVGV0aGVyQ2xhc3M7XG59KShFdmVudGVkKTtcblxuVGV0aGVyQ2xhc3MubW9kdWxlcyA9IFtdO1xuXG5UZXRoZXJCYXNlLnBvc2l0aW9uID0gcG9zaXRpb247XG5cbnZhciBUZXRoZXIgPSBleHRlbmQoVGV0aGVyQ2xhc3MsIFRldGhlckJhc2UpO1xuLyogZ2xvYmFscyBUZXRoZXJCYXNlICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIF9zbGljZWRUb0FycmF5ID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbJ3JldHVybiddKSBfaVsncmV0dXJuJ10oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZScpOyB9IH07IH0pKCk7XG5cbnZhciBfVGV0aGVyQmFzZSRVdGlscyA9IFRldGhlckJhc2UuVXRpbHM7XG52YXIgZ2V0Qm91bmRzID0gX1RldGhlckJhc2UkVXRpbHMuZ2V0Qm91bmRzO1xudmFyIGV4dGVuZCA9IF9UZXRoZXJCYXNlJFV0aWxzLmV4dGVuZDtcbnZhciB1cGRhdGVDbGFzc2VzID0gX1RldGhlckJhc2UkVXRpbHMudXBkYXRlQ2xhc3NlcztcbnZhciBkZWZlciA9IF9UZXRoZXJCYXNlJFV0aWxzLmRlZmVyO1xuXG52YXIgQk9VTkRTX0ZPUk1BVCA9IFsnbGVmdCcsICd0b3AnLCAncmlnaHQnLCAnYm90dG9tJ107XG5cbmZ1bmN0aW9uIGdldEJvdW5kaW5nUmVjdCh0ZXRoZXIsIHRvKSB7XG4gIGlmICh0byA9PT0gJ3Njcm9sbFBhcmVudCcpIHtcbiAgICB0byA9IHRldGhlci5zY3JvbGxQYXJlbnRzWzBdO1xuICB9IGVsc2UgaWYgKHRvID09PSAnd2luZG93Jykge1xuICAgIHRvID0gW3BhZ2VYT2Zmc2V0LCBwYWdlWU9mZnNldCwgaW5uZXJXaWR0aCArIHBhZ2VYT2Zmc2V0LCBpbm5lckhlaWdodCArIHBhZ2VZT2Zmc2V0XTtcbiAgfVxuXG4gIGlmICh0byA9PT0gZG9jdW1lbnQpIHtcbiAgICB0byA9IHRvLmRvY3VtZW50RWxlbWVudDtcbiAgfVxuXG4gIGlmICh0eXBlb2YgdG8ubm9kZVR5cGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBub2RlID0gdG87XG4gICAgICB2YXIgc2l6ZSA9IGdldEJvdW5kcyh0byk7XG4gICAgICB2YXIgcG9zID0gc2l6ZTtcbiAgICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodG8pO1xuXG4gICAgICB0byA9IFtwb3MubGVmdCwgcG9zLnRvcCwgc2l6ZS53aWR0aCArIHBvcy5sZWZ0LCBzaXplLmhlaWdodCArIHBvcy50b3BdO1xuXG4gICAgICAvLyBBY2NvdW50IGFueSBwYXJlbnQgRnJhbWVzIHNjcm9sbCBvZmZzZXRcbiAgICAgIGlmIChub2RlLm93bmVyRG9jdW1lbnQgIT09IGRvY3VtZW50KSB7XG4gICAgICAgIHZhciB3aW4gPSBub2RlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG4gICAgICAgIHRvWzBdICs9IHdpbi5wYWdlWE9mZnNldDtcbiAgICAgICAgdG9bMV0gKz0gd2luLnBhZ2VZT2Zmc2V0O1xuICAgICAgICB0b1syXSArPSB3aW4ucGFnZVhPZmZzZXQ7XG4gICAgICAgIHRvWzNdICs9IHdpbi5wYWdlWU9mZnNldDtcbiAgICAgIH1cblxuICAgICAgQk9VTkRTX0ZPUk1BVC5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlLCBpKSB7XG4gICAgICAgIHNpZGUgPSBzaWRlWzBdLnRvVXBwZXJDYXNlKCkgKyBzaWRlLnN1YnN0cigxKTtcbiAgICAgICAgaWYgKHNpZGUgPT09ICdUb3AnIHx8IHNpZGUgPT09ICdMZWZ0Jykge1xuICAgICAgICAgIHRvW2ldICs9IHBhcnNlRmxvYXQoc3R5bGVbJ2JvcmRlcicgKyBzaWRlICsgJ1dpZHRoJ10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRvW2ldIC09IHBhcnNlRmxvYXQoc3R5bGVbJ2JvcmRlcicgKyBzaWRlICsgJ1dpZHRoJ10pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KSgpO1xuICB9XG5cbiAgcmV0dXJuIHRvO1xufVxuXG5UZXRoZXJCYXNlLm1vZHVsZXMucHVzaCh7XG4gIHBvc2l0aW9uOiBmdW5jdGlvbiBwb3NpdGlvbihfcmVmKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciB0b3AgPSBfcmVmLnRvcDtcbiAgICB2YXIgbGVmdCA9IF9yZWYubGVmdDtcbiAgICB2YXIgdGFyZ2V0QXR0YWNobWVudCA9IF9yZWYudGFyZ2V0QXR0YWNobWVudDtcblxuICAgIGlmICghdGhpcy5vcHRpb25zLmNvbnN0cmFpbnRzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgX2NhY2hlID0gdGhpcy5jYWNoZSgnZWxlbWVudC1ib3VuZHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZ2V0Qm91bmRzKF90aGlzLmVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgdmFyIGhlaWdodCA9IF9jYWNoZS5oZWlnaHQ7XG4gICAgdmFyIHdpZHRoID0gX2NhY2hlLndpZHRoO1xuXG4gICAgaWYgKHdpZHRoID09PSAwICYmIGhlaWdodCA9PT0gMCAmJiB0eXBlb2YgdGhpcy5sYXN0U2l6ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBfbGFzdFNpemUgPSB0aGlzLmxhc3RTaXplO1xuXG4gICAgICAvLyBIYW5kbGUgdGhlIGl0ZW0gZ2V0dGluZyBoaWRkZW4gYXMgYSByZXN1bHQgb2Ygb3VyIHBvc2l0aW9uaW5nIHdpdGhvdXQgZ2xpdGNoaW5nXG4gICAgICAvLyB0aGUgY2xhc3NlcyBpbiBhbmQgb3V0XG4gICAgICB3aWR0aCA9IF9sYXN0U2l6ZS53aWR0aDtcbiAgICAgIGhlaWdodCA9IF9sYXN0U2l6ZS5oZWlnaHQ7XG4gICAgfVxuXG4gICAgdmFyIHRhcmdldFNpemUgPSB0aGlzLmNhY2hlKCd0YXJnZXQtYm91bmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLmdldFRhcmdldEJvdW5kcygpO1xuICAgIH0pO1xuXG4gICAgdmFyIHRhcmdldEhlaWdodCA9IHRhcmdldFNpemUuaGVpZ2h0O1xuICAgIHZhciB0YXJnZXRXaWR0aCA9IHRhcmdldFNpemUud2lkdGg7XG5cbiAgICB2YXIgYWxsQ2xhc3NlcyA9IFt0aGlzLmdldENsYXNzKCdwaW5uZWQnKSwgdGhpcy5nZXRDbGFzcygnb3V0LW9mLWJvdW5kcycpXTtcblxuICAgIHRoaXMub3B0aW9ucy5jb25zdHJhaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjb25zdHJhaW50KSB7XG4gICAgICB2YXIgb3V0T2ZCb3VuZHNDbGFzcyA9IGNvbnN0cmFpbnQub3V0T2ZCb3VuZHNDbGFzcztcbiAgICAgIHZhciBwaW5uZWRDbGFzcyA9IGNvbnN0cmFpbnQucGlubmVkQ2xhc3M7XG5cbiAgICAgIGlmIChvdXRPZkJvdW5kc0NsYXNzKSB7XG4gICAgICAgIGFsbENsYXNzZXMucHVzaChvdXRPZkJvdW5kc0NsYXNzKTtcbiAgICAgIH1cbiAgICAgIGlmIChwaW5uZWRDbGFzcykge1xuICAgICAgICBhbGxDbGFzc2VzLnB1c2gocGlubmVkQ2xhc3MpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgYWxsQ2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcbiAgICAgIFsnbGVmdCcsICd0b3AnLCAncmlnaHQnLCAnYm90dG9tJ10uZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgICBhbGxDbGFzc2VzLnB1c2goY2xzICsgJy0nICsgc2lkZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHZhciBhZGRDbGFzc2VzID0gW107XG5cbiAgICB2YXIgdEF0dGFjaG1lbnQgPSBleHRlbmQoe30sIHRhcmdldEF0dGFjaG1lbnQpO1xuICAgIHZhciBlQXR0YWNobWVudCA9IGV4dGVuZCh7fSwgdGhpcy5hdHRhY2htZW50KTtcblxuICAgIHRoaXMub3B0aW9ucy5jb25zdHJhaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjb25zdHJhaW50KSB7XG4gICAgICB2YXIgdG8gPSBjb25zdHJhaW50LnRvO1xuICAgICAgdmFyIGF0dGFjaG1lbnQgPSBjb25zdHJhaW50LmF0dGFjaG1lbnQ7XG4gICAgICB2YXIgcGluID0gY29uc3RyYWludC5waW47XG5cbiAgICAgIGlmICh0eXBlb2YgYXR0YWNobWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgYXR0YWNobWVudCA9ICcnO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2hhbmdlQXR0YWNoWCA9IHVuZGVmaW5lZCxcbiAgICAgICAgICBjaGFuZ2VBdHRhY2hZID0gdW5kZWZpbmVkO1xuICAgICAgaWYgKGF0dGFjaG1lbnQuaW5kZXhPZignICcpID49IDApIHtcbiAgICAgICAgdmFyIF9hdHRhY2htZW50JHNwbGl0ID0gYXR0YWNobWVudC5zcGxpdCgnICcpO1xuXG4gICAgICAgIHZhciBfYXR0YWNobWVudCRzcGxpdDIgPSBfc2xpY2VkVG9BcnJheShfYXR0YWNobWVudCRzcGxpdCwgMik7XG5cbiAgICAgICAgY2hhbmdlQXR0YWNoWSA9IF9hdHRhY2htZW50JHNwbGl0MlswXTtcbiAgICAgICAgY2hhbmdlQXR0YWNoWCA9IF9hdHRhY2htZW50JHNwbGl0MlsxXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYW5nZUF0dGFjaFggPSBjaGFuZ2VBdHRhY2hZID0gYXR0YWNobWVudDtcbiAgICAgIH1cblxuICAgICAgdmFyIGJvdW5kcyA9IGdldEJvdW5kaW5nUmVjdChfdGhpcywgdG8pO1xuXG4gICAgICBpZiAoY2hhbmdlQXR0YWNoWSA9PT0gJ3RhcmdldCcgfHwgY2hhbmdlQXR0YWNoWSA9PT0gJ2JvdGgnKSB7XG4gICAgICAgIGlmICh0b3AgPCBib3VuZHNbMV0gJiYgdEF0dGFjaG1lbnQudG9wID09PSAndG9wJykge1xuICAgICAgICAgIHRvcCArPSB0YXJnZXRIZWlnaHQ7XG4gICAgICAgICAgdEF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodG9wICsgaGVpZ2h0ID4gYm91bmRzWzNdICYmIHRBdHRhY2htZW50LnRvcCA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICB0b3AgLT0gdGFyZ2V0SGVpZ2h0O1xuICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFuZ2VBdHRhY2hZID09PSAndG9nZXRoZXInKSB7XG4gICAgICAgIGlmICh0QXR0YWNobWVudC50b3AgPT09ICd0b3AnKSB7XG4gICAgICAgICAgaWYgKGVBdHRhY2htZW50LnRvcCA9PT0gJ2JvdHRvbScgJiYgdG9wIDwgYm91bmRzWzFdKSB7XG4gICAgICAgICAgICB0b3AgKz0gdGFyZ2V0SGVpZ2h0O1xuICAgICAgICAgICAgdEF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG5cbiAgICAgICAgICAgIHRvcCArPSBoZWlnaHQ7XG4gICAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAndG9wJztcbiAgICAgICAgICB9IGVsc2UgaWYgKGVBdHRhY2htZW50LnRvcCA9PT0gJ3RvcCcgJiYgdG9wICsgaGVpZ2h0ID4gYm91bmRzWzNdICYmIHRvcCAtIChoZWlnaHQgLSB0YXJnZXRIZWlnaHQpID49IGJvdW5kc1sxXSkge1xuICAgICAgICAgICAgdG9wIC09IGhlaWdodCAtIHRhcmdldEhlaWdodDtcbiAgICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuXG4gICAgICAgICAgICBlQXR0YWNobWVudC50b3AgPSAnYm90dG9tJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodEF0dGFjaG1lbnQudG9wID09PSAnYm90dG9tJykge1xuICAgICAgICAgIGlmIChlQXR0YWNobWVudC50b3AgPT09ICd0b3AnICYmIHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSkge1xuICAgICAgICAgICAgdG9wIC09IHRhcmdldEhlaWdodDtcbiAgICAgICAgICAgIHRBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuXG4gICAgICAgICAgICB0b3AgLT0gaGVpZ2h0O1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG4gICAgICAgICAgfSBlbHNlIGlmIChlQXR0YWNobWVudC50b3AgPT09ICdib3R0b20nICYmIHRvcCA8IGJvdW5kc1sxXSAmJiB0b3AgKyAoaGVpZ2h0ICogMiAtIHRhcmdldEhlaWdodCkgPD0gYm91bmRzWzNdKSB7XG4gICAgICAgICAgICB0b3AgKz0gaGVpZ2h0IC0gdGFyZ2V0SGVpZ2h0O1xuICAgICAgICAgICAgdEF0dGFjaG1lbnQudG9wID0gJ3RvcCc7XG5cbiAgICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0QXR0YWNobWVudC50b3AgPT09ICdtaWRkbGUnKSB7XG4gICAgICAgICAgaWYgKHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSAmJiBlQXR0YWNobWVudC50b3AgPT09ICd0b3AnKSB7XG4gICAgICAgICAgICB0b3AgLT0gaGVpZ2h0O1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ2JvdHRvbSc7XG4gICAgICAgICAgfSBlbHNlIGlmICh0b3AgPCBib3VuZHNbMV0gJiYgZUF0dGFjaG1lbnQudG9wID09PSAnYm90dG9tJykge1xuICAgICAgICAgICAgdG9wICs9IGhlaWdodDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICd0b3AnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2hhbmdlQXR0YWNoWCA9PT0gJ3RhcmdldCcgfHwgY2hhbmdlQXR0YWNoWCA9PT0gJ2JvdGgnKSB7XG4gICAgICAgIGlmIChsZWZ0IDwgYm91bmRzWzBdICYmIHRBdHRhY2htZW50LmxlZnQgPT09ICdsZWZ0Jykge1xuICAgICAgICAgIGxlZnQgKz0gdGFyZ2V0V2lkdGg7XG4gICAgICAgICAgdEF0dGFjaG1lbnQubGVmdCA9ICdyaWdodCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGVmdCArIHdpZHRoID4gYm91bmRzWzJdICYmIHRBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICBsZWZ0IC09IHRhcmdldFdpZHRoO1xuICAgICAgICAgIHRBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNoYW5nZUF0dGFjaFggPT09ICd0b2dldGhlcicpIHtcbiAgICAgICAgaWYgKGxlZnQgPCBib3VuZHNbMF0gJiYgdEF0dGFjaG1lbnQubGVmdCA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgIGxlZnQgKz0gdGFyZ2V0V2lkdGg7XG4gICAgICAgICAgICB0QXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0JztcblxuICAgICAgICAgICAgbGVmdCArPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG4gICAgICAgICAgfSBlbHNlIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIGxlZnQgKz0gdGFyZ2V0V2lkdGg7XG4gICAgICAgICAgICB0QXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0JztcblxuICAgICAgICAgICAgbGVmdCAtPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChsZWZ0ICsgd2lkdGggPiBib3VuZHNbMl0gJiYgdEF0dGFjaG1lbnQubGVmdCA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIGxlZnQgLT0gdGFyZ2V0V2lkdGg7XG4gICAgICAgICAgICB0QXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuXG4gICAgICAgICAgICBsZWZ0IC09IHdpZHRoO1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9ICdyaWdodCc7XG4gICAgICAgICAgfSBlbHNlIGlmIChlQXR0YWNobWVudC5sZWZ0ID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICBsZWZ0IC09IHRhcmdldFdpZHRoO1xuICAgICAgICAgICAgdEF0dGFjaG1lbnQubGVmdCA9ICdsZWZ0JztcblxuICAgICAgICAgICAgbGVmdCArPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRBdHRhY2htZW50LmxlZnQgPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgaWYgKGxlZnQgKyB3aWR0aCA+IGJvdW5kc1syXSAmJiBlQXR0YWNobWVudC5sZWZ0ID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIGxlZnQgLT0gd2lkdGg7XG4gICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ3JpZ2h0JztcbiAgICAgICAgICB9IGVsc2UgaWYgKGxlZnQgPCBib3VuZHNbMF0gJiYgZUF0dGFjaG1lbnQubGVmdCA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgbGVmdCArPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAnbGVmdCc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFuZ2VBdHRhY2hZID09PSAnZWxlbWVudCcgfHwgY2hhbmdlQXR0YWNoWSA9PT0gJ2JvdGgnKSB7XG4gICAgICAgIGlmICh0b3AgPCBib3VuZHNbMV0gJiYgZUF0dGFjaG1lbnQudG9wID09PSAnYm90dG9tJykge1xuICAgICAgICAgIHRvcCArPSBoZWlnaHQ7XG4gICAgICAgICAgZUF0dGFjaG1lbnQudG9wID0gJ3RvcCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodG9wICsgaGVpZ2h0ID4gYm91bmRzWzNdICYmIGVBdHRhY2htZW50LnRvcCA9PT0gJ3RvcCcpIHtcbiAgICAgICAgICB0b3AgLT0gaGVpZ2h0O1xuICAgICAgICAgIGVBdHRhY2htZW50LnRvcCA9ICdib3R0b20nO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFuZ2VBdHRhY2hYID09PSAnZWxlbWVudCcgfHwgY2hhbmdlQXR0YWNoWCA9PT0gJ2JvdGgnKSB7XG4gICAgICAgIGlmIChsZWZ0IDwgYm91bmRzWzBdKSB7XG4gICAgICAgICAgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgIGxlZnQgKz0gd2lkdGg7XG4gICAgICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gJ2xlZnQnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZUF0dGFjaG1lbnQubGVmdCA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgICAgIGxlZnQgKz0gd2lkdGggLyAyO1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9ICdsZWZ0JztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGVmdCArIHdpZHRoID4gYm91bmRzWzJdKSB7XG4gICAgICAgICAgaWYgKGVBdHRhY2htZW50LmxlZnQgPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgbGVmdCAtPSB3aWR0aDtcbiAgICAgICAgICAgIGVBdHRhY2htZW50LmxlZnQgPSAncmlnaHQnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZUF0dGFjaG1lbnQubGVmdCA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgICAgIGxlZnQgLT0gd2lkdGggLyAyO1xuICAgICAgICAgICAgZUF0dGFjaG1lbnQubGVmdCA9ICdyaWdodCc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgcGluID09PSAnc3RyaW5nJykge1xuICAgICAgICBwaW4gPSBwaW4uc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICByZXR1cm4gcC50cmltKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwaW4gPT09IHRydWUpIHtcbiAgICAgICAgcGluID0gWyd0b3AnLCAnbGVmdCcsICdyaWdodCcsICdib3R0b20nXTtcbiAgICAgIH1cblxuICAgICAgcGluID0gcGluIHx8IFtdO1xuXG4gICAgICB2YXIgcGlubmVkID0gW107XG4gICAgICB2YXIgb29iID0gW107XG5cbiAgICAgIGlmICh0b3AgPCBib3VuZHNbMV0pIHtcbiAgICAgICAgaWYgKHBpbi5pbmRleE9mKCd0b3AnKSA+PSAwKSB7XG4gICAgICAgICAgdG9wID0gYm91bmRzWzFdO1xuICAgICAgICAgIHBpbm5lZC5wdXNoKCd0b3AnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvb2IucHVzaCgndG9wJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRvcCArIGhlaWdodCA+IGJvdW5kc1szXSkge1xuICAgICAgICBpZiAocGluLmluZGV4T2YoJ2JvdHRvbScpID49IDApIHtcbiAgICAgICAgICB0b3AgPSBib3VuZHNbM10gLSBoZWlnaHQ7XG4gICAgICAgICAgcGlubmVkLnB1c2goJ2JvdHRvbScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9vYi5wdXNoKCdib3R0b20nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobGVmdCA8IGJvdW5kc1swXSkge1xuICAgICAgICBpZiAocGluLmluZGV4T2YoJ2xlZnQnKSA+PSAwKSB7XG4gICAgICAgICAgbGVmdCA9IGJvdW5kc1swXTtcbiAgICAgICAgICBwaW5uZWQucHVzaCgnbGVmdCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9vYi5wdXNoKCdsZWZ0Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGxlZnQgKyB3aWR0aCA+IGJvdW5kc1syXSkge1xuICAgICAgICBpZiAocGluLmluZGV4T2YoJ3JpZ2h0JykgPj0gMCkge1xuICAgICAgICAgIGxlZnQgPSBib3VuZHNbMl0gLSB3aWR0aDtcbiAgICAgICAgICBwaW5uZWQucHVzaCgncmlnaHQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvb2IucHVzaCgncmlnaHQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocGlubmVkLmxlbmd0aCkge1xuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBwaW5uZWRDbGFzcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLm9wdGlvbnMucGlubmVkQ2xhc3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBwaW5uZWRDbGFzcyA9IF90aGlzLm9wdGlvbnMucGlubmVkQ2xhc3M7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBpbm5lZENsYXNzID0gX3RoaXMuZ2V0Q2xhc3MoJ3Bpbm5lZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGFkZENsYXNzZXMucHVzaChwaW5uZWRDbGFzcyk7XG4gICAgICAgICAgcGlubmVkLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgICAgIGFkZENsYXNzZXMucHVzaChwaW5uZWRDbGFzcyArICctJyArIHNpZGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAob29iLmxlbmd0aCkge1xuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBvb2JDbGFzcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLm9wdGlvbnMub3V0T2ZCb3VuZHNDbGFzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG9vYkNsYXNzID0gX3RoaXMub3B0aW9ucy5vdXRPZkJvdW5kc0NsYXNzO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvb2JDbGFzcyA9IF90aGlzLmdldENsYXNzKCdvdXQtb2YtYm91bmRzJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYWRkQ2xhc3Nlcy5wdXNoKG9vYkNsYXNzKTtcbiAgICAgICAgICBvb2IuZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgICAgICAgYWRkQ2xhc3Nlcy5wdXNoKG9vYkNsYXNzICsgJy0nICsgc2lkZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChwaW5uZWQuaW5kZXhPZignbGVmdCcpID49IDAgfHwgcGlubmVkLmluZGV4T2YoJ3JpZ2h0JykgPj0gMCkge1xuICAgICAgICBlQXR0YWNobWVudC5sZWZ0ID0gdEF0dGFjaG1lbnQubGVmdCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHBpbm5lZC5pbmRleE9mKCd0b3AnKSA+PSAwIHx8IHBpbm5lZC5pbmRleE9mKCdib3R0b20nKSA+PSAwKSB7XG4gICAgICAgIGVBdHRhY2htZW50LnRvcCA9IHRBdHRhY2htZW50LnRvcCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAodEF0dGFjaG1lbnQudG9wICE9PSB0YXJnZXRBdHRhY2htZW50LnRvcCB8fCB0QXR0YWNobWVudC5sZWZ0ICE9PSB0YXJnZXRBdHRhY2htZW50LmxlZnQgfHwgZUF0dGFjaG1lbnQudG9wICE9PSBfdGhpcy5hdHRhY2htZW50LnRvcCB8fCBlQXR0YWNobWVudC5sZWZ0ICE9PSBfdGhpcy5hdHRhY2htZW50LmxlZnQpIHtcbiAgICAgICAgX3RoaXMudXBkYXRlQXR0YWNoQ2xhc3NlcyhlQXR0YWNobWVudCwgdEF0dGFjaG1lbnQpO1xuICAgICAgICBfdGhpcy50cmlnZ2VyKCd1cGRhdGUnLCB7XG4gICAgICAgICAgYXR0YWNobWVudDogZUF0dGFjaG1lbnQsXG4gICAgICAgICAgdGFyZ2V0QXR0YWNobWVudDogdEF0dGFjaG1lbnRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBkZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIShfdGhpcy5vcHRpb25zLmFkZFRhcmdldENsYXNzZXMgPT09IGZhbHNlKSkge1xuICAgICAgICB1cGRhdGVDbGFzc2VzKF90aGlzLnRhcmdldCwgYWRkQ2xhc3NlcywgYWxsQ2xhc3Nlcyk7XG4gICAgICB9XG4gICAgICB1cGRhdGVDbGFzc2VzKF90aGlzLmVsZW1lbnQsIGFkZENsYXNzZXMsIGFsbENsYXNzZXMpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfTtcbiAgfVxufSk7XG4vKiBnbG9iYWxzIFRldGhlckJhc2UgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX1RldGhlckJhc2UkVXRpbHMgPSBUZXRoZXJCYXNlLlV0aWxzO1xudmFyIGdldEJvdW5kcyA9IF9UZXRoZXJCYXNlJFV0aWxzLmdldEJvdW5kcztcbnZhciB1cGRhdGVDbGFzc2VzID0gX1RldGhlckJhc2UkVXRpbHMudXBkYXRlQ2xhc3NlcztcbnZhciBkZWZlciA9IF9UZXRoZXJCYXNlJFV0aWxzLmRlZmVyO1xuXG5UZXRoZXJCYXNlLm1vZHVsZXMucHVzaCh7XG4gIHBvc2l0aW9uOiBmdW5jdGlvbiBwb3NpdGlvbihfcmVmKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciB0b3AgPSBfcmVmLnRvcDtcbiAgICB2YXIgbGVmdCA9IF9yZWYubGVmdDtcblxuICAgIHZhciBfY2FjaGUgPSB0aGlzLmNhY2hlKCdlbGVtZW50LWJvdW5kcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBnZXRCb3VuZHMoX3RoaXMuZWxlbWVudCk7XG4gICAgfSk7XG5cbiAgICB2YXIgaGVpZ2h0ID0gX2NhY2hlLmhlaWdodDtcbiAgICB2YXIgd2lkdGggPSBfY2FjaGUud2lkdGg7XG5cbiAgICB2YXIgdGFyZ2V0UG9zID0gdGhpcy5nZXRUYXJnZXRCb3VuZHMoKTtcblxuICAgIHZhciBib3R0b20gPSB0b3AgKyBoZWlnaHQ7XG4gICAgdmFyIHJpZ2h0ID0gbGVmdCArIHdpZHRoO1xuXG4gICAgdmFyIGFidXR0ZWQgPSBbXTtcbiAgICBpZiAodG9wIDw9IHRhcmdldFBvcy5ib3R0b20gJiYgYm90dG9tID49IHRhcmdldFBvcy50b3ApIHtcbiAgICAgIFsnbGVmdCcsICdyaWdodCddLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgdmFyIHRhcmdldFBvc1NpZGUgPSB0YXJnZXRQb3Nbc2lkZV07XG4gICAgICAgIGlmICh0YXJnZXRQb3NTaWRlID09PSBsZWZ0IHx8IHRhcmdldFBvc1NpZGUgPT09IHJpZ2h0KSB7XG4gICAgICAgICAgYWJ1dHRlZC5wdXNoKHNpZGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAobGVmdCA8PSB0YXJnZXRQb3MucmlnaHQgJiYgcmlnaHQgPj0gdGFyZ2V0UG9zLmxlZnQpIHtcbiAgICAgIFsndG9wJywgJ2JvdHRvbSddLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgdmFyIHRhcmdldFBvc1NpZGUgPSB0YXJnZXRQb3Nbc2lkZV07XG4gICAgICAgIGlmICh0YXJnZXRQb3NTaWRlID09PSB0b3AgfHwgdGFyZ2V0UG9zU2lkZSA9PT0gYm90dG9tKSB7XG4gICAgICAgICAgYWJ1dHRlZC5wdXNoKHNpZGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgYWxsQ2xhc3NlcyA9IFtdO1xuICAgIHZhciBhZGRDbGFzc2VzID0gW107XG5cbiAgICB2YXIgc2lkZXMgPSBbJ2xlZnQnLCAndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbSddO1xuICAgIGFsbENsYXNzZXMucHVzaCh0aGlzLmdldENsYXNzKCdhYnV0dGVkJykpO1xuICAgIHNpZGVzLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgIGFsbENsYXNzZXMucHVzaChfdGhpcy5nZXRDbGFzcygnYWJ1dHRlZCcpICsgJy0nICsgc2lkZSk7XG4gICAgfSk7XG5cbiAgICBpZiAoYWJ1dHRlZC5sZW5ndGgpIHtcbiAgICAgIGFkZENsYXNzZXMucHVzaCh0aGlzLmdldENsYXNzKCdhYnV0dGVkJykpO1xuICAgIH1cblxuICAgIGFidXR0ZWQuZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgYWRkQ2xhc3Nlcy5wdXNoKF90aGlzLmdldENsYXNzKCdhYnV0dGVkJykgKyAnLScgKyBzaWRlKTtcbiAgICB9KTtcblxuICAgIGRlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghKF90aGlzLm9wdGlvbnMuYWRkVGFyZ2V0Q2xhc3NlcyA9PT0gZmFsc2UpKSB7XG4gICAgICAgIHVwZGF0ZUNsYXNzZXMoX3RoaXMudGFyZ2V0LCBhZGRDbGFzc2VzLCBhbGxDbGFzc2VzKTtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZUNsYXNzZXMoX3RoaXMuZWxlbWVudCwgYWRkQ2xhc3NlcywgYWxsQ2xhc3Nlcyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufSk7XG4vKiBnbG9iYWxzIFRldGhlckJhc2UgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3NsaWNlZFRvQXJyYXkgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsncmV0dXJuJ10pIF9pWydyZXR1cm4nXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlJyk7IH0gfTsgfSkoKTtcblxuVGV0aGVyQmFzZS5tb2R1bGVzLnB1c2goe1xuICBwb3NpdGlvbjogZnVuY3Rpb24gcG9zaXRpb24oX3JlZikge1xuICAgIHZhciB0b3AgPSBfcmVmLnRvcDtcbiAgICB2YXIgbGVmdCA9IF9yZWYubGVmdDtcblxuICAgIGlmICghdGhpcy5vcHRpb25zLnNoaWZ0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHNoaWZ0ID0gdGhpcy5vcHRpb25zLnNoaWZ0O1xuICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLnNoaWZ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBzaGlmdCA9IHRoaXMub3B0aW9ucy5zaGlmdC5jYWxsKHRoaXMsIHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfSk7XG4gICAgfVxuXG4gICAgdmFyIHNoaWZ0VG9wID0gdW5kZWZpbmVkLFxuICAgICAgICBzaGlmdExlZnQgPSB1bmRlZmluZWQ7XG4gICAgaWYgKHR5cGVvZiBzaGlmdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHNoaWZ0ID0gc2hpZnQuc3BsaXQoJyAnKTtcbiAgICAgIHNoaWZ0WzFdID0gc2hpZnRbMV0gfHwgc2hpZnRbMF07XG5cbiAgICAgIHZhciBfc2hpZnQgPSBzaGlmdDtcblxuICAgICAgdmFyIF9zaGlmdDIgPSBfc2xpY2VkVG9BcnJheShfc2hpZnQsIDIpO1xuXG4gICAgICBzaGlmdFRvcCA9IF9zaGlmdDJbMF07XG4gICAgICBzaGlmdExlZnQgPSBfc2hpZnQyWzFdO1xuXG4gICAgICBzaGlmdFRvcCA9IHBhcnNlRmxvYXQoc2hpZnRUb3AsIDEwKTtcbiAgICAgIHNoaWZ0TGVmdCA9IHBhcnNlRmxvYXQoc2hpZnRMZWZ0LCAxMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNoaWZ0VG9wID0gc2hpZnQudG9wO1xuICAgICAgc2hpZnRMZWZ0ID0gc2hpZnQubGVmdDtcbiAgICB9XG5cbiAgICB0b3AgKz0gc2hpZnRUb3A7XG4gICAgbGVmdCArPSBzaGlmdExlZnQ7XG5cbiAgICByZXR1cm4geyB0b3A6IHRvcCwgbGVmdDogbGVmdCB9O1xuICB9XG59KTtcbnJldHVybiBUZXRoZXI7XG5cbn0pKTtcbiJdfQ==
